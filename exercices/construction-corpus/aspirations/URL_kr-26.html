<!doctype html>
<html lang="ko-KR"> 
 <head> <!-- meta --> 
  <meta charset="utf-8"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0"> 
  <meta name="referrer" content="unsafe-url"> <!-- google ad sence --> 
  <script data-ad-client="ca-pub-2704741335862169" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> 
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon"> <!-- // meta --> <!-- seo --> <!-- Global site tag (gtag.js) - Google Analytics --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53476308-1"></script> 
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-53476308-1');
</script> <!-- Global site tag (gtag.js) - Google Analytics --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPZ8BHZPSJ"></script> 
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-ZPZ8BHZPSJ');
</script> <!-- (최종) 통합한국일보닷컴 --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HR08PM6YWZ"></script> 
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-HR08PM6YWZ');
</script> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53476308-12"></script> 
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-53476308-12');
</script> <!-- (최종) 모바일 한국일보닷컴 --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53476308-5"></script> 
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-53476308-5');
</script> <!-- Google Tag Manager --> 
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-59599H7');</script> <!-- End Google Tag Manager --> 
  <meta name="title" content="&quot;혐오 메일 보내주신&quot;, 페미니즘을 거부하는 당신에게 답합니다"> 
  <meta name="keywords" content="남성한국일보우대다면기자사회페미니즘여성메일여성혐오"> 
  <meta name="description" content="페미니즘을 거부하는 당신에게 - 남성한국일보우대다면기자사회페미니즘여성메일여성혐오"> 
  <meta property="og:url" content="https://m.hankookilbo.com/News/Read/A2022032411350002138?t=20221214193050"> 
  <meta property="og:site_name" content="한국일보"> 
  <meta property="og:locale" content="ko_KR"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="&quot;혐오 메일 보내주신&quot;, 페미니즘을 거부하는 당신에게 답합니다"> 
  <meta property="og:description" content="페미니즘을 거부하는 당신에게"> 
  <meta property="og:image" content="https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/fd7a627d-c3b1-4483-a8d5-89c3619b42d8.jpg?t=20221214193050"> 
  <meta property="og:image:width" content="1200"> 
  <meta property="og:image:height" content="630"> 
  <meta property="article:author" content="https://www.facebook.com/hkilbo"> 
  <meta property="article:publisher" content="https://www.facebook.com/hkilbo"> 
  <meta name="twitter:site" content="@hankookilbo"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:url" content="https://m.hankookilbo.com/News/Read/A2022032411350002138?t=20221214193050"> 
  <meta name="twitter:title" content="&quot;혐오 메일 보내주신&quot;, 페미니즘을 거부하는 당신에게 답합니다"> 
  <meta name="twitter:description" content="페미니즘을 거부하는 당신에게"> 
  <meta name="twitter:image" content="https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/fd7a627d-c3b1-4483-a8d5-89c3619b42d8.jpg?t=20221214193050"> 
  <meta name="twitter:creator" content="@hankookilbo"> 
  <meta property="article:published_time" content="2022-03-24T13:37:15.000+0900"> 
  <meta property="article:section" content="사회"> 
  <meta property="article:section2" content="사회일반"> 
  <meta property="article:section3" content="페미니즘을 거부하는 당신에게"> 
  <meta property="dable:item_id" content="A2022032411350002138"> 
  <meta property="dable:author" content="전혼잎 기자 hoihoi@hankookilbo.com,최나실 기자 verite@hankookilbo.com,최은서 기자 silver@hankookilbo.com"> 
  <meta property="dable:title" content="&quot;혐오 메일 보내주신&quot;, 페미니즘을 거부하는 당신에게 답합니다"> 
  <meta property="dable:image" content="https://newsimg.hankookilbo.com/cms/thumbnail/articlerelease/2022/03/24/A2022032411350002138.jpg?t=20221214193050"> 
  <meta name="robots" content="max-image-preview:large"> 
  <meta property="fb:pages" content="157370204315766"> 
  <title>"혐오 메일 보내주신", 페미니즘을 거부하는 당신에게 답합니다</title> <!-- // seo --> <!-- header-script --> 
  <link rel="stylesheet" href="/css/lib/ion.rangeSlider.min.css"> 
  <link rel="stylesheet" href="/css/lib/datepicker.min.css"> 
  <link rel="stylesheet" href="/css/style_mobile.css?ver=3.0.7"> 
  <script src="/js/lib/jquery-3.4.1.min.js"></script> 
  <script src="/js/lib/jquery-ui.min.js"></script> 
  <script src="/js/lib/jquery.cookie.min.js"></script> 
  <script src="/js/lib/lazysizes.min.js" async></script> 
  <script src="/js/lib/moment.min.js"></script> 
  <script src="/js/lib/modernizr-custom.js"></script> 
  <script src="/js/lib/detectizr.min.js"></script> 
  <script src="/js/vendor.js"></script> 
  <script src="/js/common.js?ver=3.0.7"></script> 
  <script src="/js/lib/hangul.min.js" type="text/javascript"></script> 
  <link rel="stylesheet" href="https://uicdn.toast.com/tui.chart/latest/tui-chart.min.css"> 
  <script src="https://uicdn.toast.com/tui.chart/latest/tui-chart-all.min.js"></script> 
  <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=xuh6ou62fp"></script> <!-- bottom popup --> 
 </head>
 <body>
  <div class="floating-items"> <!-- popup-floating --> 
   <section id="toast-last-read-news" class="popup-floating floating-relay"> 
    <div class="breaking-news"> 
     <div class="white-badge">
      이어보기
     </div> <a class="text" href="javascript:;" id="toast-last-read-a-tag"></a> <button class="btn-close" onclick="onClickCloseLastReadNews()"> <span class="blind">닫기</span> </button> 
    </div> 
   </section> <!-- popup-floating --> 
   <section id="floating-ad" class="popup-floating floating-ad"> <!-- .ad-banner --> 
    <div class="ad-banner"> 
     <div class="img-box"> 
      <script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/endpage@floating"></script> 
     </div> 
    </div> <!-- // .ad-banner --> <button class="btn-close-small" onclick="onAdCloseClick()"> <span class="blind">닫기</span> </button> 
   </section> 
   <script>

    function onAdCloseClick() {
        $('#floating-ad').closePopup();
    }

    $(document).ready(function() {
        $('#floating-ad').openPopup(); // 플로팅광고
        // 안드로이드 앱 : youtube frame 있는경우 하단 플로팅 광고 제거
        if(navigator.userAgent.indexOf('Mobile-App-Android') > -1){
            if($("iframe[src*='youtube.com']").length>0){
                $('#floating-ad').addClass('blind');
            }
        }
    });
</script> <!-- FCM script --> 
   <div class="toast-container imp-toast"> <!-- 로그인/회원가입 --> 
    <div class="toast-item login-box-tst"> 
     <div class="toast-inner clearfix"> 
      <div class="tit"> 
       <p><a href="/Intro/Intro2022">새로워진 한국일보를 만나세요.</a></p> 
      </div> <a href="/auth/sign-in" class="more-txt">로그인</a> <a href="javascript:void(0);" class="close a11y" onclick="fnOneDayNotView()">닫기</a> 
     </div> 
    </div> 
   </div> 
   <script type="text/javascript">
    let $loginBox = $('.toast-container .toast-item.login-box-tst');
    generateSokboToast = (redisJson) => {
        let readArticles = decodeURIComponent(this.getFCMCookie('hk_sokbo_article_viewend'));
        let denialAlarmType = decodeURIComponent(this.getFCMCookie('hk_denial_alarm_type'));
        for (var i = 0; i < redisJson.articles.length; i++){
            const expire_time = moment(redisJson.articles[i].expire_time, 'YYYY-MM-DD hh:mm:ss').format('YYYY-MM-DD hh:mm:ss');
            const now = moment().format('YYYY-MM-DD hh:mm:ss');
            const isNowDeploy = moment(expire_time).isAfter(now);

            if(!isNowDeploy){
                return false;
            }
            if(readArticles.includes(redisJson.articles[i].article_id) || denialAlarmType.includes(redisJson.articles[i].article_type)){
                break;
            }

            let html = '';
            html += '<div class="toast-item"  data-push-id="'+ redisJson.articles[i].apppush_Id +'">';
            html += '    <div class="toast-inner-wrapper">';
            html += '        <div class="title">';

            if(redisJson.articles[i].article_type === 'SOKBO'){
                html += '            <span class="badge alarm-news-flash">속보</span>';
            } else if(redisJson.articles[i].article_type === 'EXCLUSIVE'){
                html += '            <span class="badge alarm-news-exclusive">단독</span>';
            } else if(redisJson.articles[i].article_type === 'SUBSCRIBE'){
                html += '            <span class="badge alarm-news-subscription">구독</span>';
            }

            html += '               <h4 class="title-text"><a href="/webpool-click/?i='+redisJson.articles[i].apppush_Id+'&c='+redisJson.articles[i].article_id+'">' + redisJson.articles[i].article_title + '</a></h4>';

            if(redisJson.articles[i].article_type === 'SOKBO'){
                html += '            <a href="/webpool-click/?i='+redisJson.articles[i].apppush_Id+'&c='+redisJson.articles[i].article_id+'"><p>' + redisJson.articles[i].article_contents.replace(/\[속보\]/g, "") + '</p></a>';
            } else if(redisJson.articles[i].article_type === 'EXCLUSIVE'){
                html += '            <a href="/webpool-click/?i='+redisJson.articles[i].apppush_Id+'&c='+redisJson.articles[i].article_id+'"><p>' + redisJson.articles[i].article_contents.replace(/\[단독\]/g, "") + '</p></a>';
            } else if(redisJson.articles[i].article_type === 'SUBSCRIBE'){
                html += '            <a href="/webpool-click/?i='+redisJson.articles[i].apppush_Id+'&c='+redisJson.articles[i].article_id+'"><p>' + redisJson.articles[i].article_contents.replace(/\[구독\]/g, "") + '</p></a>';
            } else {
                html += '            <a href="/webpool-click/?i='+redisJson.articles[i].apppush_Id+'&c='+redisJson.articles[i].article_id+'"><p>' + redisJson.articles[i].article_contents + '</p></a>';
            }

            html += '        </div>'

            if(redisJson.articles[i].article_image !== '' || redisJson.articles[i].article_image !== null){
                html += '           <div class="img-box">';
                html += '               <img src="' + redisJson.articles[i].article_image + '" alt="">';
                html += '           </div>';
            }

            html += '    </div>';
            html += '    <div class="actions">';
            html += '        <button type="button" class="btn-alarm" title="오늘 하루 알림 끄기" data-denial="' + redisJson.articles[i].article_type +'">알림설정</button>';
            html += '        <button type="button" class="btn-close">알림 닫기</button>';
            html += '    </div>';
            html += '</div>';
            $loginBox.after(html);
            autoRemoveToast(redisJson.articles[i].apppush_Id);

            // 만료시간체크 : 존재하면 내용 분석하여 만료시간이 현재시간이내이면 노출
            // 쿠키노출체크 : 노출할경우 쿠키에 해당 기사 노출확인후 최종 노출
            // 노출한 경우 해당기사키 쿠키에 저장
            // 쿠키명 : hk_sokbo_article_viewend
            let fcmArticleId = getFCMCookie('hk_sokbo_article_viewend');
            let cookieData = Boolean(fcmArticleId) ? decodeURIComponent(fcmArticleId) + ',' + redisJson.articles[i].article_id : redisJson.articles[i].article_id;
            this.setFCMCookie('hk_sokbo_article_viewend', cookieData, 1);
            // 쿠키내용 : 기사키,기사키,기사키
            // 쿠키만료시간 : 1일
            // 쿠키 등록
        }
        $(".toast-container .toast-item:not(.login-box-tst)").addClass("show");

    }

    generateFcmToast = (rst) => {
        let html = '';
        let readArticles = decodeURIComponent(this.getFCMCookie('hk_sokbo_article_viewend'));
        let denialAlarmType = decodeURIComponent(this.getFCMCookie('hk_denial_alarm_type'));
        if(denialAlarmType.includes(denialAlarmType.includes(rst.data.apppush_type))){
            return false;
        }
        if(readArticles.includes(denialAlarmType.includes(rst.data.apppush_type))){
            return false;
        }
        const appuserPushId = Cookies.get('appuserPushId');

        html += '<div class="toast-item" data-push-id="'+ rst.fcmMessageId +'">';
        html += '    <div class="toast-inner-wrapper">';
        html += '        <div class="title">';

        if(rst.data.apppush_type === 'SOKBO'){
            html += '            <span class="badge alarm-news-flash">속보</span>';
        } else if(rst.data.apppush_type === 'EXCLUSIVE'){
            html += '            <span class="badge alarm-news-exclusive">단독</span>';
        } else if(rst.data.apppush_type === 'SUBSCRIBE'){
          html += '            <span class="badge alarm-news-subscription">구독</span>';
        }

        html += '            <h4 class="title-text"><a href="'+ rst.data.uri + '&a=' + appuserPushId +'">' + rst.notification.title + '</a></h4>';

        if(rst.data.apppush_type === 'SOKBO'){
            html += '            <a href="'+ rst.data.uri + '&a=' + appuserPushId +'"><p>' + rst.notification.body.replace(/\[속보\]/g, "") + '</p></a>';
        } else if(rst.data.apppush_type === 'EXCLUSIVE'){
            html += '            <a href="'+ rst.data.uri + '&a=' + appuserPushId +'"><p>' + rst.notification.body.replace(/\[단독\]/g, "") + '</p></a>';
        } else if(rst.data.apppush_type === 'SUBSCRIBE'){
            html += '            <a href="'+ rst.data.uri + '&a=' + appuserPushId +'"><p>' + rst.notification.body.replace(/\[구독\]/g, "") + '</p></a>';
        } else {
            html += '            <a href="'+ rst.data.uri + '&a=' + appuserPushId +'"><p>' + rst.notification.body + '</p></a>';
        }

        html += '        </div>';

        if(rst.notification.image !== '' || rst.notification.image !== null){
            html += '            <div class="img-box">';
            html += '                <img src="' + rst.notification.image + '" alt="">';
            html += '            </div>';
        }

        html += '    </div>';
        html += '    <div class="actions">';
        html += '        <button type="button" class="btn-alarm" title="오늘 하루 알림 끄기" data-denial="' + rst.data.apppush_type +'">알림설정</button>';
        html += '        <button type="button" class="btn-close">알림 닫기</button>';
        html += '    </div>';
        html += '</div>';
        $loginBox.before(html);
        autoRemoveToast(rst.fcmMessageId);
        // 만료시간체크 : 존재하면 내용 분석하여 만료시간이 현재시간이내이면 노출
        // 쿠키노출체크 : 노출할경우 쿠키에 해당 기사 노출확인후 최종 노출
        // 노출한 경우 해당기사키 쿠키에 저장
        // 쿠키명 : hk_sokbo_article_viewend
        // let fcmArticleId = getFCMCookie('hk_sokbo_article_viewend');
        // let cookieData = Boolean(fcmArticleId) ? decodeURIComponent(fcmArticleId) + ',' + redisJson.articles[i].article_id : redisJson.articles[i].article_id;
        // this.setFCMCookie('hk_sokbo_article_viewend', cookieData, 1);
        // 쿠키내용 : 기사키,기사키,기사키
        // 쿠키만료시간 : 1일
        // 쿠키 등록
        $(".toast-container .toast-item:not(.login-box-tst)").addClass("show");
    }

    /* top notice EVT */
    function closeNotice() {
        $("#topNotiArea .close").on('click', function () {
            $("#topNotiArea .close").css("display", "none");
            $("#topNotiArea").slideUp(500);
        });
    }

    function initAlarm() {
        var $list = $('.toast-container .toast-item');
        var $pushList = $('.toast-container .toast-item:not(.login-box-tst)');
        var $loginBox = $('.toast-container .toast-item.login-box-tst');

        if ($($list.hasClass("login-box-tst")).length) {
            $loginBox.removeClass("hide").addClass("show");
        }
        $pushList.each(function (idx) {
            var $item = $(this);
            setTimeout(function () {
                $item.addClass("show");
            }, 500 * (idx + 1));
        });
    }

    function showAlarm() {
        let redisJson = [];

        $.ajax({
            url: "https://api.hankookilbo.com/api/readredis",
            method: "POST",
            data: {'key' : 'whk_sokbo_article'},
            success: function (response) {
                if(response.code === '0000'){
                    if(response.data !== 'notfound'){
                        redisJson = JSON.parse(response.data);
                        generateSokboToast(redisJson);
                    }
                }
            },
            fail: function (err) {
            }
        });
    }
    // hk_denial_alarm_type
    function setDenialAlarmType(denialType){
        this.setFCMCookie('hk_denial_alarm_type', denialType, 1);
    }

    function getFCMCookie(key){
        key = new RegExp(key + '=([^;]*)');
        return key.test(document.cookie) ? unescape(RegExp.$1) : ''; // 인자로 받은 키에 해당하는 키가 있으면 값을 반환
    }

    function setFCMCookie(key, value, expiredays) {
        let todayDate = new Date();
        todayDate.setDate(todayDate.getDate() + expiredays); // 현재 시각 + 일 단위로 쿠키 만료 날짜 변경
        //todayDate.setTime(todayDate.getTime() + (expiredays * 24 * 60 * 60 * 1000)); // 밀리세컨드 단위로 쿠키 만료 날짜 변경
        document.cookie = key + "=" + escape(value) + "; path=/; expires=" + todayDate.toGMTString() + ";";
    }

    function deleteCookie(name) {
        document.cookie = name + '=; expires=Thu, 01 Jan 1999 00:00:10 GMT;';
    }

    function hideAlarm() {
        $(document).on("click", '.imp-toast .btn-close', function () {
            var $this = $(this);
            $this.parents(".toast-item").removeClass("show").addClass("hide");
        });

        $(document).on("click", '.login-box-tst .close', function () {
            $('.login-box-tst').removeClass("show").addClass("hide");
        });
    }

    function toggleAlarm() {
        $(document).on("click", '.imp-toast .btn-alarm', function () {
            var $this = $(this);
            if (!($this.hasClass("btn-alarm-disable"))) {
                $this.addClass("btn-alarm-disable").attr("title", "오늘 하루 알림 켜키");
                console.log('### ' + $this.data('denial'));
                let denialType = $this.data('denial');

                let hk_denial_alarm_type = getFCMCookie('hk_denial_alarm_type');
                if(hk_denial_alarm_type.includes(denialType)) {
                    return false;
                }
                denialType = Boolean(hk_denial_alarm_type) ? decodeURIComponent(hk_denial_alarm_type) + ',' + denialType : denialType;
                setDenialAlarmType(denialType);
            } else {
                $this.removeClass("btn-alarm-disable").attr("title", "오늘 하루 알림 끄기");
                let hk_denial_alarm_type = getFCMCookie('hk_denial_alarm_type');
                const denialType = $this.data('denial');

                if(hk_denial_alarm_type.includes(denialType)){
                    let str = hk_denial_alarm_type;
                    let arr = str.split(',');
                    let filtered = arr.filter((element) => element !== denialType);
                    deleteCookie('hk_denial_alarm_type');
                    setDenialAlarmType(filtered.join());
                }


                // console.log(denialType);
                // deleteCookie(hk_denial_alarm_type);
            }
        });
    }

    function fnOneDayNotView(){
        this.setFCMCookie('hk_denial_login_area', 'Y', 1);
    }

    function loginInfoView(){
        if(!Boolean(Cookies.get('accessToken'))){
            if(!Boolean(getFCMCookie('hk_denial_login_area'))){
                var $loginBox = $('.toast-container .toast-item.login-box-tst');
                $loginBox.removeClass("hide").addClass("show");
            }
        }
    }

    // 웹푸시 자동삭제(10분)
    var FCM_TOAST_LOG = {};
    function autoRemoveToast(fcmMessageId){
        FCM_TOAST_LOG[fcmMessageId] = setTimeout(function(){
            $(".toast-item[data-push-id='"+ fcmMessageId +"']").find('.btn-close').trigger("click");
            delete FCM_TOAST_LOG[fcmMessageId];
        }, 600000);
    };

    $(function () {
        showAlarm();
        // 상단 탑 노티영역 닫기
        closeNotice();
        loginInfoView();

        // 푸시알람 표시
        // initAlarm();
        // 속보 / 단건 조회
        setInterval(
            () =>
            showAlarm()
            , 1000 * 60 * 1
        );

        // 푸시알람 닫기, 알람끄기 토글
        hideAlarm();
        toggleAlarm();
    });
</script> 
  </div> 
  <script src="/js/article-notice.js"></script> 
  <script>
    /**
     * 로그인 돼있으면
     */
    // if (Cookies.get('accessToken')) {
    //     // console.log('이어보기 기사 id 조회');
    //     $.ajax({
    //         url: '/users/last-read-article',
    //         type: 'GET',
    //         contentType: 'application/json',
    //         timeout: 30000,
    //         success: function (data) {
    //             // // console.log(data);
    //             if (data) {
    //                 // console.log('이어보기 기사 있음');
    //                 $('#toast-last-read-news').addClass('on');
    //                 $('#toast-last-read-news').addClass('show');
    //                 $('#toast-last-read-news').removeClass('blind');
    //                 $('#toast-last-read-a-tag').html(data.articleTitle);
    //
    //                 $('#toast-last-read-a-tag').on('click', function() {
    //                     removeLastReadArticle();
    //                     location.href = '/News/Read/' + data.articleId;
    //                 });
    //                 // console.log(data)
    //             } else {
    //                 // console.log('이어보기 기사 없음');
    //                 // console.log(data);
    //             }
    //         },
    //         error: function (req, stat, err) {
    //             // console.log(err);
    //         }
    //     }); // ajax
    // }

    function onClickCloseLastReadNews() {
        $('#toast-last-read-news').addClass('blind');
        removeLastReadArticle()
    }
</script> <!-- // bottom popup --> 
  <script>
    // 기본 이미지
    (function(){
        var NOTFOUNDSRC = '/images/Default-Image.png';
        document.addEventListener('error', function(e){
            // image 404
            if(e.target.nodeName.toLowerCase() == 'img' && e.target.getAttribute('src') != NOTFOUNDSRC){
                e.target.src = NOTFOUNDSRC;
            }
        }, true);
    })();

    // 기사 닫기 클릭 시 돌아갈 url 정의
    if ('' != 'MAIN') {
        
        Cookies.set('closeUrl', '/', { path: '/' });
        
    }

    // CDN 제외 설정
    $.ajaxSetup({
        beforeSend : function(xhr){
            xhr.setRequestHeader("Cache-Control", "no-cache");
        }
    });

    // var updateFlag = false;

    // 체류시간
    // document.cookie = 'uv_stay_id' + "=" + generateUuid() + "; path=/";
    var stayId = generateUuid();

    // 방문자
    if (!Cookies.get('uv_user_id')) {
        var date = new Date();
        // 아이폰일 경우
        // if (navigator.userAgent.indexOf('iPhone') > -1 || navigator.userAgent.indexOf('Mobile-App-Ios') > -1 ) {
        //     date.setHours(date.getHours() - 9);
        // }

        date.setFullYear(date.getFullYear() + 1);

        var expireDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);
        var expires = "; expires=" + expireDate.toUTCString();

        document.cookie = 'uv_user_id' + "=" + generateUuid() + expires + "; path=/";
        // updateFlag = true;
    }

    // 세션
    if (!Cookies.get('uv_session_id')) {
        var date = new Date();
        // 아이폰일 경우
        // if (navigator.userAgent.indexOf('iPhone') > -1 || navigator.userAgent.indexOf('Mobile-App-Ios') > -1 ) {
        //     date.setHours(date.getHours() - 9);
        // }

        date.setTime(date.getTime() + (30 * 1000 * 60));
        var expires = "; expires=" + date.toUTCString();

        
        document.cookie = 'uv_session_id' + "=" + generateUuid() + "; path=/";
        // updateFlag = true;
    }


    $(function (){
        if($(".dimmed").length==0){
            $("body").prepend("<div class=\"dimmed\"></div>");
        }
    });
</script> 
  <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase.js"></script> 
  <script>

    const isMobileChrome = (-1 !== navigator.userAgent.indexOf('Chrome'));
    if (isMobileChrome) {
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyCj96NqzMc42ZMLCv4GqbnKErMsqalgUng",
            authDomain: "hankookilbo-25efe.firebaseapp.com",
            databaseURL: "https://hankookilbo-25efe.firebaseio.com",
            projectId: "hankookilbo-25efe",
            storageBucket: "hankookilbo-25efe.appspot.com",
            messagingSenderId: "115606840922",
            appId: "1:115606840922:web:93245197d8f8586d46da63",
            measurementId: "G-2RZDGBVQK4"

        };
        firebase.initializeApp(config);

        const messaging = firebase.messaging();

        //token값 알아내기
        messaging.requestPermission()
            .then(function () {
                console.log("Have permission");
                return messaging.getToken();
            })
            .then(function (token) {
                Cookies.set('FCM-TOKEN', token, {path: '/'});
                // const cft = Cookies.get('FCM-TOKEN');
                // if(!Boolean(cft)){
                // Cookies.set('fid', guid(), {path: '/'});
                var appuserPushId = Cookies.get('appuserPushId');
                fcmLoading(appuserPushId, token);
                // }

            })
            .catch(function (arr) {
                console.log("Error Occured");
            });

        messaging.onMessage((payload) => {
            console.log('Message received. ', payload);
            generateFcmToast(payload);
            // ...
        });

        function fcmLoading(appuserPushId, token) {
            if (Boolean(appuserPushId)) {
                data = {
                    'appuserPushId': appuserPushId
                    , 'appuserPushKey': token
                };
            } else {
                data = {
                    'appuserPushId': appuserPushId
                    , 'appuserPushKey': token
                    , 'appuserPushAgreeyn': 'Y'
                    , 'appuserAlarmSokbo': 'Y'
                    , 'appuserAlarmSubscribe': 'Y'
                    , 'appuserAlarmReply': 'Y'
                    , 'appuserAlarmMarketing': 'Y'
                    , 'appuserAlarmEtiquetteTime': 'Y'
                };
            }
            $.ajax({
                url: '/main-fcm-loading',
                method: 'GET',
                dataType: 'json',
                contentType: 'application/json',
                data: data,
                success: function (response) {
                    if (response.code === '0000') {
                        Cookies.set('appuserPushId', response.data.view.appuserPushId, {path: '/'});
                    }
                },
                fail: function (response) {
                }
            });
        }
    }
</script> <!-- // header-script --> 
  <script data-ad-client="ca-pub-9575884151581415" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Global site tag (gtag.js) - Google Analytics --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6N5VSF0VLL"></script> 
  <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-6N5VSF0VLL');
    </script> 
  <script>
        var _searchHost = '';
        try{
            _searchHost = 'https://search.hankookilbo.com';
        }catch(e){
            _searchHost = 'https://search.hankookilbo.com';
        }
    </script> <!-- Dable 스크립트 시작 / 문의 media@dable.io --> 
  <script>
    (function(d,a,b,l,e,_) {
        d[b]=d[b]||function(){(d[b].q=d[b].q||[]).push(arguments)};e=a.createElement(l);
        e.async=1;e.charset='utf-8';e.src='//static.dable.io/dist/plugin.min.js';
        _=a.getElementsByTagName(l)[0];_.parentNode.insertBefore(e,_);
    })(window,document,'dable','script');
    dable('setService', 'm.hankookilbo.com');
    dable('sendLogOnce');
</script>  <!-- Google Tag Manager (noscript) --> 
  <noscript>
   <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-59599H7" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript> <!-- End Google Tag Manager (noscript) --><!-- wrap --> 
  <div class="wrap improve"> <!-- top --> 
   <section id="gnb" class="popup gnb"> <!-- header --> 
    <header class="header"> 
     <div class="left"> <!-- .on :  알림 있는 경우 추가 --> <button type="button" class="btn-notice" id="btn-notice"> <span class="blind">알림</span> </button> <button type="button" class="btn-my" onclick="onClickMyPage()"> <span class="blind">마이페이지</span> </button> 
     </div> 
     <div class="right"> <button type="button" class="btn-set" onclick="location.href='/users/setting'"> <span class="blind">설정</span> </button> <button type="button" class="btn-close" onclick="$(this).closest('.popup').closePopup();"> <span class="blind">닫기</span> </button> 
     </div> 
    </header> <!-- // header --> <!-- container --> 
    <div class="container"> <!-- top-area --> 
     <div class="top-area" id="top-area"> 
      <p class="text" href="javascript:;"> 한국일보에 <span class="point-color">로그인</span>하시면 <br>다양한 편의 기능을 <br>제공 받을 수 있습니다. </p> 
      <div class="btn-area"> <a href="/auth/sign-in">로그인</a> <a href="javascript:onClickSignUp()">회원가입</a> <a href="/article/member-report" class="inquiry">제보 및 문의</a> 
      </div> 
     </div> <!-- // top-area --> <!-- nav --> 
     <nav class="nav"> 
      <ul> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Politics">정치</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Politics/HA01">국회/정당</a> </li> 
         <li><a class="" href="/News/Politics/HA02">청와대</a> </li> 
         <li><a class="" href="/News/Politics/HA03">외교</a> </li> 
         <li><a class="" href="/News/Politics/HA04">국방/북한</a> </li> 
         <li><a class="" href="/News/Politics/HA99">정치일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Economy">경제</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Economy/HB01">경제정책</a> </li> 
         <li><a class="" href="/News/Economy/HB02">산업</a> </li> 
         <li><a class="" href="/News/Economy/HB03">금융/증권</a> </li> 
         <li><a class="" href="/News/Economy/HB04">부동산</a> </li> 
         <li><a class="" href="/News/Economy/HB05">IT/과학</a> </li> 
         <li><a class="" href="/News/Economy/HB99">경제일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap on"> <a href="/News/Society">사회</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Society/HC01">사건/사고</a> </li> 
         <li><a class="" href="/News/Society/HC02">법원/경찰</a> </li> 
         <li><a class="" href="/News/Society/HC03">교육</a> </li> 
         <li><a class="" href="/News/Society/HC04">노동</a> </li> 
         <li><a class="" href="/News/Society/HC05">보건/복지</a> </li> 
         <li><a class="" href="/News/Society/HC06">날씨/환경</a> </li> 
         <li><a class="" href="/News/Society/HC99">사회일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/World">국제</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/World/HD01">아시아/호주</a> </li> 
         <li><a class="" href="/News/World/HD02">미국/중남미</a> </li> 
         <li><a class="" href="/News/World/HD03">유럽</a> </li> 
         <li><a class="" href="/News/World/HD04">중동/아프리카</a> </li> 
         <li><a class="" href="/News/World/HD05">글로벌 이슈</a> </li> 
         <li><a class="" href="/News/World/HD99">국제일반 </a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Culture">문화</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Culture/HE01">책</a> </li> 
         <li><a class="" href="/News/Culture/HE02">공연/전시</a> </li> 
         <li><a class="" href="/News/Culture/HE99">문화일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Enter">연예</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Culture/HF99">연예일반</a> </li> 
         <li><a class="" href="/News/Culture/HF02">영화</a> </li> 
         <li><a class="" href="/News/Culture/HF03">방송</a> </li> 
         <li><a class="" href="/News/Culture/HF04">음악</a> </li> 
         <li><a class="" href="/News/Culture/HF05">실시간 연예</a> </li> 
         <li><a class="" href="/News/Culture/HF06">포토 뉴스</a> </li> 
        </ul> </li> 
       <li class="has-line"> 
        <div class="anchor-wrap "> <a href="/Sports">스포츠</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Sports/HG01">야구</a> </li> 
         <li><a class="" href="/News/Sports/HG02">축구</a> </li> 
         <li><a class="" href="/News/Sports/HG03">농구</a> </li> 
         <li><a class="" href="/News/Sports/HG04">배구</a> </li> 
         <li><a class="" href="/News/Sports/HG05">해외스포츠</a> </li> 
         <li><a class="" href="/News/Sports/HG06">골프</a> </li> 
         <li><a class="" href="/News/Sports/HG99">스포츠일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/People">사람</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/People/HH01">인터뷰 </a> </li> 
         <li><a class="" href="/News/People/HH02">인사/동정</a> </li> 
         <li><a class="" href="/News/People/HH03">부고</a> </li> 
         <li><a class="" href="/News/People/HH99">사람일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Life">라이프</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Life/HI01">음식 </a> </li> 
         <li><a class="" href="/News/Life/HI02">여행 </a> </li> 
         <li><a class="" href="/News/Life/HI03">건강 </a> </li> 
         <li><a class="" href="/News/Life/HI04">블론디</a> </li> 
         <li><a class="" href="/News/Life/HI05">백운산 오늘의 운세</a> </li> 
         <li><a class="" href="/News/Life/HI99">라이프일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Local">지역</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Local/HJ01">수도권</a> </li> 
         <li><a class="" href="/News/Local/HJ02">대전/충청/강원</a> </li> 
         <li><a class="" href="/News/Local/HJ03">대구/경북</a> </li> 
         <li><a class="" href="/News/Local/HJ04">부산/경남</a> </li> 
         <li><a class="" href="/News/Local/HJ05">광주/전라/제주</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/Opinion">오피니언</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/Opinion/HK01">사설</a> </li> 
         <li><a class="" href="/Opinion/HK02">칼럼</a> </li> 
         <li><a class="" href="/Opinion/HK03">만평</a> </li> 
         <li><a class="" href="/Opinion/HK04">사고알림</a> </li> 
        </ul> </li> 
       <li class="has-line"> 
        <div class="anchor-wrap "> <a href="/Focus">포커스 취재</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/Focus/HL01">기획/연재</a> </li> 
         <li><a class="" href="/Focus/Interactive">인터랙티브</a> </li> 
         <li><a class="" href="/Focus/HL02">뉴잼</a> </li> 
        </ul> </li> 
       <li> 
        <div class="anchor-wrap SOCIETY"> <a href="/Topic" onclick="return false;">주제판</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul id="topic-pan-list" class="sub bottom"></ul> </li> 
       <li class="has-line"> <a href="/my/subscriptionChannelMain/ALL" class="link">구독<sup class="hk-color">+</sup></a> </li> 
       <li class=""> <a class="link" href="/Vertical/Animal">동물</a> </li> 
       <li class=""> <a class="link" href="/Vertical/Video">영상</a> </li> 
      </ul> 
     </nav> <!-- // nav --> <!-- bottom-area --> 
     <div class="bottom-area"> <button class="btn-green" onclick="location.href = '/NewsLetter/NewsJam'">뉴스레터 구독</button> 
      <ul class="link-list"> 
       <li><a href="/article/member-report">제보 및 문의</a></li> 
       <li><a href="/paoin">지면보기</a></li> 
       <li><a href="http://company.hankookilbo.com/Subscription/apply.aspx" target="_blank">구독안내</a></li> 
       <li><a href="https://hkphoto.hankookilbo.com" target="_blank">사진검색 &amp; 구매</a></li> 
      </ul> 
      <ul class="outlink-list"> 
       <li> <a href="http://yourvibes.co.kr/" target="_blank" class="link-yourvibes"> <img src="/images/logo_yourvibe.jpg" alt="your vibes"> </a> </li> 
       <li> <a href="http://www.koreatimes.co.kr/" target="_blank" class="link-koreantimes"> <img src="/images/svg/the_korean_times.svg" alt="The Korean Times"> </a> </li> 
      </ul> 
     </div> <!-- // bottom-area --> 
    </div> <!-- // container --> 
   </section> 
   <div class="subscribe-wrapper imp-mypage-subscribe new-alarm"> 
    <section class="subscribe new-alarm-sub"> 
     <div class="subscribe-handle-wrapper " draggable="true"> 
      <div class="subscribe-handle"></div> 
     </div> 
     <div class="alarm-header"> 
      <h3>알림</h3> 
      <div class="btn-con"> <button class="ala-close-btn" onclick="closeNewAlarmList()"></button> 
      </div> 
     </div> 
     <ul class="attension-list new-alarm-list" id="myAlramArea"> 
     </ul> 
     <div class="btn-container"> <button class="view-more-btn" onclick="location.href='/MyPage?Filter=Alarm'">내 알림 더보기</button> 
     </div> 
    </section> 
   </div> 
   <script>
    var encData;
    $.ajax({
        url: '/auth/cp/data',
        type: 'GET',
        dataType: 'json',
        contentType: 'application/json',
        timeout: 30000,
        success: function (response) {
            $('form input[name="EncodeData"]').val(response.data);
        },
        error: function (req, stat, err) {
            // console.log(err);
        }
    }); // ajax

    function openCpPopup() {
        if (navigator.userAgent.indexOf('Mobile-App') > -1) {
            var data = {
                type: 'SIGN_UP_NICE'
            };
            window.ReactNativeWebView.postMessage(JSON.stringify(data));
            document.form_chk.action = "https://nice.checkplus.co.kr/CheckPlusSafeModel/checkplus.cb";
            document.form_chk.submit();
        } else {
            window.open('', 'popupChk', 'width=500, height=550, top=100, left=100, fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=yes, location=no, scrollbar=no');
            document.form_chk.action = "https://nice.checkplus.co.kr/CheckPlusSafeModel/checkplus.cb";
            document.form_chk.target = "popupChk";
            document.form_chk.submit();
        }
    }

    function cpSuccess(data) {
        encData = data;
        if (authType === 'migration') {
            $.ajax({
                type: "PATCH",
                url: '/users/migration?encData=' + encodeURIComponent(encData),
                success: function (response) {
                    console.log(response);
                    if (response === true) {
                        alert('마이그레이션이 완료되었습니다.');
                        var signInUrl = Cookies.get('sign-in-url');
                        if (signInUrl) {
                            Cookies.remove('sign-in-url');
                            location.replace(signInUrl);
                        } else {
                            location.replace('/');
                        }
                    }
                }
            })
        } else {
            checkExistUserNice();
        }

    }

    function checkExistUserNice() {
        $.ajax({
            type: "GET",
            url: '/users/exist?encData=' + encodeURIComponent(encData),
            success: function (response) {
                // console.log('본인 인증 회원가입 -> 본인 중복 확인');
                // console.log(JSON.parse(response));
                // console.log(authType);
                var flag = JSON.parse(response);
                if (flag) {
                    // 중복이면 이미 가입된 회원
                    // 회원가입일 경우
                    if (authType === 'enroll') {

                        $('.popup-alert').closePopup();
                        $('#sign-up-user-exist-popup').openPopup();
                        niceVeryfiyInfo = null;
                        // 아이디 찾기일 경우
                    } else if (authType === 'idfind') {
                        $.ajax({
                            type: "GET",
                            url: '/api/users/find-id?encData=' + encodeURIComponent(encData),
                            success: function (response) {
                                // console.log(response);
                                var user = response;
                                // 사용자가 있으면
                                if (response !== null) {
                                    location.replace('/users/find-id-result?name=' + user.memName + "&mobile=" + user.memMobile + "&memId=" + user.memId)
                                    // 사용자가 없으면
                                } else {
                                    $('.popup-alert').closePopup();
                                    ('#find-id-no-account-popup').openPopup();
                                }

                            },
                            fail: function (response) {
                                // console.log('아이디 찾기 에러')
                            }
                        })
                    } else if (authType === 'pwfind') {
                        $('#change-password-popup').openPopup();
                    } else if (authType === 'pwchange') {
                        $('#my-page-edit-pw-popup').openPopup();
                    } else if (authType === 'pennamechange') {
                        $('#my-page-edit-pen-name-popup').openPopup();
                    }
                    // 본인인증으로 찾은 아이디가 없을 때
                } else {
                    // 회원가입일 경우
                    if (authType === 'enroll') {
                        signUpType = 'None';

                        location.href = '/auth/sign-up-nice?encData=' + encodeURIComponent(encData);
                        // 아이디 찾기일 경우
                    }
                    // 중복 가입이 아니면 약관 동의 화면우
                }
            },
            fail: function (error) {
                // console.log('SNS 회원가입 -> 본인 중복 확인 체크 에러');
                // console.log(JSON.parse(error.responseText));
            }
        });
    }
</script> <!-- 본인인증 서비스 팝업을 호출하기 위해서는 다음과 같은 form이 필요합니다. --> 
   <form name="form_chk" method="post"> 
    <input type="hidden" name="m" value="checkplusSerivce"> <!-- 필수 데이타로, 누락하시면 안됩니다. --> 
    <input type="hidden" name="EncodeData"> <!-- 위에서 업체정보를 암호화 한 데이타입니다. --> 
   </form> 
   <section id="sign-up-user-exist-popup" class="popup-alert" style="z-index: 100000"> 
    <div class="inner"> 
     <h1 class="title">중복 가입 확인</h1> 
     <p>이미 가입된 회원입니다.</p> 
     <div class="btn-area"> <button type="button" onclick="$(this).closest('.popup-alert').closePopup(); location.href = '/auth/sign-in'">확인</button> 
     </div> 
    </div> 
   </section> 
   <script>
  // 주제판 메뉴
  $.ajax({
    url: "/topic/pan-list",
    method: "GET",
    dataType: "text",
    contentType: "application/json",
    success: function (res) {
      let menuHtml = "";
      JSON.parse(res).forEach(el => {
        menuHtml += "<li><a href='/Topic?topicId=" + el.topicId + "'>" + el.topicTitle + "</a></li>";
      });
      $("#topic-pan-list").append(menuHtml);
    },
    fail: function (err) {
      $("#topic-pan-list").parent().remove();
    }
  });
</script> 
   <script>
  var user;

  if (Cookies.get('accessToken') != null) {
    // ui setting
    $('#logOutBtn').removeClass('blind');
    $('#logInBtn').addClass('blind');
    $('#convenient-setting').removeClass('blind');
    $('#event-receive-setting').removeClass('blind');
    $('#account-setting').removeClass('blind');

    $.ajax({
      url: '/users/me',
      type: 'GET',
      contentType: 'application/json',
      success: function (data) {
        // console.log('getuserme -> 성공');
        // console.log(data);
        user = data;
        if (data.sectionCounts !== undefined && data.sectionCounts.length > 0) {
          $('#top-area').html("<p class=\"text\" href=\"#\">\n" +
              "                    안녕하세요.\n" +
              "                    <br><span class=\"point-color\">" + data.memPenName + "</span>님은 최근 <span class=\"point-color\">" +
              data.sectionCounts[0].sectionName + "</span>기사를\n" +
              "                    <br>가장 많이 읽었습니다.\n" +
              "                </p><div class=\"btn-area\"><a href=\"/article/member-report\" class=\"inquiry\">제보 및 문의</a></div>")
        } else {
          $('#top-area').html("<p class=\"text\" href=\"#\">\n" +
              "                    안녕하세요.\n" +
              "                    <span class=\"point-color\">" + data.memPenName + "</span>님</p><div class=\"btn-area\"><a href=\"/article/member-report\" class=\"inquiry\">제보 및 문의</a></div>")
        }

        // 이벤트 및 프로모션 수신 동의 체크
        $('#email-setting-switch').prop('checked', data.eventAgreeEmail === 'Y');
        $('#sms-setting-switch').prop('checked', data.eventSmsAgree === 'Y');
        $('#nLetter-setting-switch').prop('checked', data.nLetterAgree === 'Y');
      },
      error: function (req, stat, err) {
        // console.log(err);
      }
    });
  }

  function onClickSignUp() {
    authType = 'enroll';
    Cookies.set('authType', 'enroll', {path: '/'});
    if (navigator.userAgent.indexOf('Mobile-App') > -1) {
      var data = {
        type: 'SIGN_UP_NICE'
      };
      window.ReactNativeWebView.postMessage(JSON.stringify(data));
    } else {
      openCpPopup();

    }
  }

  function onClickMyPage() {
    if (Cookies.get('accessToken') != null) {
      location.href = '/MyPage';
    } else {
      location.href = '/auth/sign-in';
    }
  }
</script> 
   <script>
  $(function () {
    let $modal = $(".subscribe-wrapper.imp-mypage-subscribe");
    let $inner = $(".subscribe.new-alarm-sub");
    let $alarmBtn = $(".btn-notice");
    let $body = $("body");

    $alarmBtn.on("click", function () {
      if (Cookies.get('accessToken') != null) {
        $modal.addClass("on");
        $body.css({"overflow": "hidden"});
        $inner.css({"top": 0});

        console.log($inner)
        $inner.draggable({
          handle: '.subscribe-handle-wrapper',
          containment: [0, 0, 0, $(window).height()],
          axis: 'y',
          stop: function (event, ui) {
            if (ui.position.top > 500) {
              $modal.removeClass('on');
              $body.css({"overflow": "auto"});
            } else {
              $inner.css({"top": ui.originalPosition.top});
            }
          },
        });
        alarmToggle();
      } else {
        location.href = '/auth/sign-in';
      }
    })
  })

  function closeNewAlarmList() {
    $(".subscribe-wrapper.imp-mypage-subscribe").removeClass("on");
    $("body").css({overflowY: "auto"});
  }

  function alarmToggle() {
    if (Cookies.get('accessToken') !== undefined) {
      $.ajax({
        url: '/users/push-myalarm-webmobile',
        method: 'GET',
        success: function (response) {
          if (response.code === '0000') {
            const data = response.data;
            let html = '';

            const listSize = data.list.length;

            if (listSize > 0) {
              for (let i = 0; i < listSize; i++) {
                const apppushType = data.list[i].apppushType;
                let typeClass = "";
                let typeNm = "";
                let pushTit = data.list[i].apppushTitle;
                let pushConts = data.list[i].apppushContents;
                const now = moment().format('YYYYMMDD');
                let sendDate = moment(data.list[i].apppushSenddate).format('YYYYMMDD');
                const afterDate = timeForToday(moment(data.list[i].apppushSenddate).format('YYYY-MM-DD hh:mm:ss'));
                let weekend = moment(sendDate).day();
                let weekendNm = '';
                switch (weekend.toString()) {
                  case '0':
                    weekendNm = '일';
                    break;
                  case '1':
                    weekendNm = '월';
                    break;
                  case '2':
                    weekendNm = '화';
                    break;
                  case '3':
                    weekendNm = '수';
                    break;
                  case '4':
                    weekendNm = '목';
                    break;
                  case '5':
                    weekendNm = '금';
                    break;
                  case '6':
                    weekendNm = '토';
                    break;
                }
                let isToday = moment(now).diff(sendDate, 'days') < 1 ? ' (오늘)' : '(' + weekendNm + ')';
                if (i > 0) {
                  let beforeIdx = Number(i - 1);
                  let tempSendDate = moment(data.list[beforeIdx].apppushSenddate).format('YYYYMMDD');
                  if (tempSendDate == moment(data.list[i].apppushSenddate).format('YYYYMMDD')) {
                    sendDate = "";
                    isToday = "";
                  }
                }
                let sendDateFormatIng = '';
                if (Boolean(sendDate)) {
                  sendDateFormatIng = moment(sendDate).format('YYYY. MM. DD');
                }

                html += ' <li class="include-date">';
                html += '     <p class="date-box">' + sendDateFormatIng + ' ' + isToday + '</p>';
                html += '     <a href="/News/Read/' + data.list[i].articleId + '">';

                let isBadgeUse = false;
                if (apppushType == 'SOKBO') {
                  typeClass = "break-mark";
                  typeNm = "속보";
                  pushConts = pushConts.replace(/\[속보\]/g, "");
                  isBadgeUse = true;
                } else if (apppushType == 'SUBSCRIBE') {
                  typeClass = "subscribe-mark";
                  typeNm = "구독";
                  pushConts = pushConts.replace(/\[구독\]/g, "");
                  isBadgeUse = true;
                } else if (apppushType == 'EXCLUSIVE') {
                  typeClass = "exclusive-mark";
                  typeNm = "단독";
                  pushConts = pushConts.replace(/\[단독\]/g, "");
                  isBadgeUse = true;
                } else {
                  isBadgeUse = false;
                }

                if(isBadgeUse) {
                  html += '     <mark class="' + typeClass + '">' + typeNm + '</mark>';
                }

                html += '     <p class="sub-tit">' + pushTit + '</p>';
                html += '         <h5>' + pushConts + '</h5>';
                html += '         <p class="date">' + afterDate + '</p>';
                html += '     </a>';
                html += ' </li>';
              }
            } else {
              html += '    <li class="no-alarm">';
              html += '        <h5>새로운 알림이 없습니다.</h5>';
              html += '    </li>';
            }
            $('#myAlramArea').html(html);
          }
        },
        fail: function (response) {
        }
      });
    }
  }

  function timeForToday(value) {
    const today = new Date();
    const timeValue = new Date(value);

    const betweenTime = Math.floor((today.getTime() - timeValue.getTime()) / 1000 / 60);
    if (betweenTime < 1) return '방금전';
    if (betweenTime < 60) {
      return betweenTime + '분전';
    }

    //메세지 수신 후 12시간이 지나면 년월일시분 노출로 요청 하여 로직 변경
    const betweenTimeHour = Math.floor(betweenTime / 60);

    if (betweenTimeHour < 12) {
        return betweenTimeHour + '시간전';
    } else {
        let timeFormating = moment(timeValue).format('hh시 mm분');
        let isAmPm = moment(timeValue).format('(a)');
        let ampmNm = '';
        switch (isAmPm) {
            case '(am)':
                ampmNm = '오전';
                break;
            case '(pm)':
                ampmNm = '오후';
                break;
        }

        return ampmNm + ' ' + timeFormating;
    }
  }
</script> <!-- header --> 
   <div class="improve-header" data-type="end"> 
    <div class="top-bar"> 
     <div class="navigate"> <a href="#" class="icon-btn-back" onclick="history.back();">이전페이지</a> <button type="button" class="btn-subsc" data-size="xs" onclick="onClickSubscribeArticleBtn('top')">구독</button> 
     </div> 
     <div class="actions"> <button type="button" class="icon-btn-share">공유하기</button> <button type="button" class="icon-btn-bookmark" onclick="onClickSaveArticleBtn()">저장하기</button> <button type="button" class="icon-btn-comment"> 댓글작성 <span class="count" id="commentCntSpan"> <span class="blind">새로운 댓글</span> 6 </span> </button> <button type="button" class="icon-btn-viewmode">글자크기 조절</button> 
     </div> 
    </div> 
    <div class="toolbox"> 
     <div class="scale"> 
      <div class="scale-min">
       가
      </div> 
      <div id="font-scale-control"> <span class="scale-lv-Line"></span> <span class="scale-lv-Line"></span> <span class="scale-lv-Line"></span> <span class="scale-lv-Line"></span> <span class="scale-lv-Line"></span> 
      </div> 
      <div class="scale-max">
       가
      </div> 
     </div> 
     <div class="color"> <button type="button" class="on" data-type="light">밝은 배경</button> <button type="button" data-type="dark">어두운 배경</button> 
     </div> 
    </div> 
   </div> 
   <header class="improve-header no-nav" data-type="sub"> 
    <div class="top-bar"> 
     <div class="navigate"> 
      <h1 class="hk-logo"><a href="/">한국일보</a></h1> <button type="button" class="category"> 사회</button> 
     </div> 
     <div class="actions"> <a href="javascript:onClickLogo()" type="button" class="icon-btn-home">홈</a> <button type="button" class="icon-btn-search" onclick="$('#searchPopup').openPopup();">검색</button> <button type="button" class="icon-btn-menu" onclick="onClickMenuBtn();"> 전체메뉴 <!-- 새로운 내용이 있을 시 추가 --> <i id="alarmBadge" class="new" style="display: none;"></i> </button> 
     </div> 
     <script>
  (function(){
    if (Cookies.get('accessToken') !== undefined) {
      $.ajax({
        url: '/users/push-myalarm-totalcnt',
        method: 'GET',
        success: function (response) {
          const cntNum = response.alarmTotalCount;
          if(response.code === '0000') {
            if (cntNum > 0) {
              $('#alarmBadge').show();
            } else {
              $('#alarmBadge').hide();
            }
          } else {
            $('#alarmBadge').hide();
          }
        },
        fail: function (response) {
          $('#alarmBadge').hide();
        }
      });
    }
  })();

  function onClickLogo() {
    removeLastReadArticle();
    location.replace('/');
  }

  function onClickMenuBtn() {
    // console.log(navigator.userAgent);
    if (navigator.userAgent.indexOf('Mobile-App') > -1) {
      const data = {
        type: 'OPEN_LNB'
      };
      window.ReactNativeWebView.postMessage(JSON.stringify(data));
    } else {
      $('#gnb').openPopup('preventScroll');
    }
  }
</script> 
    </div> 
   </header> <!-- // header --> 
   <section id="gnb" class="popup gnb"> <!-- header --> 
    <header class="header"> 
     <div class="left"> <!-- .on :  알림 있는 경우 추가 --> <button type="button" class="btn-notice" id="btn-notice"> <span class="blind">알림</span> </button> <button type="button" class="btn-my" onclick="onClickMyPage()"> <span class="blind">마이페이지</span> </button> 
     </div> 
     <div class="right"> <button type="button" class="btn-set" onclick="location.href='/users/setting'"> <span class="blind">설정</span> </button> <button type="button" class="btn-close" onclick="$(this).closest('.popup').closePopup();"> <span class="blind">닫기</span> </button> 
     </div> 
    </header> <!-- // header --> <!-- container --> 
    <div class="container"> <!-- top-area --> 
     <div class="top-area" id="top-area"> 
      <p class="text" href="javascript:;"> 한국일보에 <span class="point-color">로그인</span>하시면 <br>다양한 편의 기능을 <br>제공 받을 수 있습니다. </p> 
      <div class="btn-area"> <a href="/auth/sign-in">로그인</a> <a href="javascript:onClickSignUp()">회원가입</a> <a href="/article/member-report" class="inquiry">제보 및 문의</a> 
      </div> 
     </div> <!-- // top-area --> <!-- nav --> 
     <nav class="nav"> 
      <ul> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Politics">정치</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Politics/HA01">국회/정당</a> </li> 
         <li><a class="" href="/News/Politics/HA02">청와대</a> </li> 
         <li><a class="" href="/News/Politics/HA03">외교</a> </li> 
         <li><a class="" href="/News/Politics/HA04">국방/북한</a> </li> 
         <li><a class="" href="/News/Politics/HA99">정치일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Economy">경제</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Economy/HB01">경제정책</a> </li> 
         <li><a class="" href="/News/Economy/HB02">산업</a> </li> 
         <li><a class="" href="/News/Economy/HB03">금융/증권</a> </li> 
         <li><a class="" href="/News/Economy/HB04">부동산</a> </li> 
         <li><a class="" href="/News/Economy/HB05">IT/과학</a> </li> 
         <li><a class="" href="/News/Economy/HB99">경제일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap on"> <a href="/News/Society">사회</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Society/HC01">사건/사고</a> </li> 
         <li><a class="" href="/News/Society/HC02">법원/경찰</a> </li> 
         <li><a class="" href="/News/Society/HC03">교육</a> </li> 
         <li><a class="" href="/News/Society/HC04">노동</a> </li> 
         <li><a class="" href="/News/Society/HC05">보건/복지</a> </li> 
         <li><a class="" href="/News/Society/HC06">날씨/환경</a> </li> 
         <li><a class="" href="/News/Society/HC99">사회일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/World">국제</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/World/HD01">아시아/호주</a> </li> 
         <li><a class="" href="/News/World/HD02">미국/중남미</a> </li> 
         <li><a class="" href="/News/World/HD03">유럽</a> </li> 
         <li><a class="" href="/News/World/HD04">중동/아프리카</a> </li> 
         <li><a class="" href="/News/World/HD05">글로벌 이슈</a> </li> 
         <li><a class="" href="/News/World/HD99">국제일반 </a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Culture">문화</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Culture/HE01">책</a> </li> 
         <li><a class="" href="/News/Culture/HE02">공연/전시</a> </li> 
         <li><a class="" href="/News/Culture/HE99">문화일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Enter">연예</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Culture/HF99">연예일반</a> </li> 
         <li><a class="" href="/News/Culture/HF02">영화</a> </li> 
         <li><a class="" href="/News/Culture/HF03">방송</a> </li> 
         <li><a class="" href="/News/Culture/HF04">음악</a> </li> 
         <li><a class="" href="/News/Culture/HF05">실시간 연예</a> </li> 
         <li><a class="" href="/News/Culture/HF06">포토 뉴스</a> </li> 
        </ul> </li> 
       <li class="has-line"> 
        <div class="anchor-wrap "> <a href="/Sports">스포츠</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Sports/HG01">야구</a> </li> 
         <li><a class="" href="/News/Sports/HG02">축구</a> </li> 
         <li><a class="" href="/News/Sports/HG03">농구</a> </li> 
         <li><a class="" href="/News/Sports/HG04">배구</a> </li> 
         <li><a class="" href="/News/Sports/HG05">해외스포츠</a> </li> 
         <li><a class="" href="/News/Sports/HG06">골프</a> </li> 
         <li><a class="" href="/News/Sports/HG99">스포츠일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/People">사람</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/People/HH01">인터뷰 </a> </li> 
         <li><a class="" href="/News/People/HH02">인사/동정</a> </li> 
         <li><a class="" href="/News/People/HH03">부고</a> </li> 
         <li><a class="" href="/News/People/HH99">사람일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Life">라이프</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Life/HI01">음식 </a> </li> 
         <li><a class="" href="/News/Life/HI02">여행 </a> </li> 
         <li><a class="" href="/News/Life/HI03">건강 </a> </li> 
         <li><a class="" href="/News/Life/HI04">블론디</a> </li> 
         <li><a class="" href="/News/Life/HI05">백운산 오늘의 운세</a> </li> 
         <li><a class="" href="/News/Life/HI99">라이프일반</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/News/Local">지역</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/News/Local/HJ01">수도권</a> </li> 
         <li><a class="" href="/News/Local/HJ02">대전/충청/강원</a> </li> 
         <li><a class="" href="/News/Local/HJ03">대구/경북</a> </li> 
         <li><a class="" href="/News/Local/HJ04">부산/경남</a> </li> 
         <li><a class="" href="/News/Local/HJ05">광주/전라/제주</a> </li> 
        </ul> </li> 
       <li class=""> 
        <div class="anchor-wrap "> <a href="/Opinion">오피니언</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/Opinion/HK01">사설</a> </li> 
         <li><a class="" href="/Opinion/HK02">칼럼</a> </li> 
         <li><a class="" href="/Opinion/HK03">만평</a> </li> 
         <li><a class="" href="/Opinion/HK04">사고알림</a> </li> 
        </ul> </li> 
       <li class="has-line"> 
        <div class="anchor-wrap "> <a href="/Focus">포커스 취재</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul class="sub"> 
         <li><a class="" href="/Focus/HL01">기획/연재</a> </li> 
         <li><a class="" href="/Focus/Interactive">인터랙티브</a> </li> 
         <li><a class="" href="/Focus/HL02">뉴잼</a> </li> 
        </ul> </li> 
       <li> 
        <div class="anchor-wrap SOCIETY"> <a href="/Topic" onclick="return false;">주제판</a> <a class="anchor" href="javascript:;"></a> 
        </div> 
        <ul id="topic-pan-list" class="sub bottom"></ul> </li> 
       <li class="has-line"> <a href="/my/subscriptionChannelMain/ALL" class="link">구독<sup class="hk-color">+</sup></a> </li> 
       <li class=""> <a class="link" href="/Vertical/Animal">동물</a> </li> 
       <li class=""> <a class="link" href="/Vertical/Video">영상</a> </li> 
      </ul> 
     </nav> <!-- // nav --> <!-- bottom-area --> 
     <div class="bottom-area"> <button class="btn-green" onclick="location.href = '/NewsLetter/NewsJam'">뉴스레터 구독</button> 
      <ul class="link-list"> 
       <li><a href="/article/member-report">제보 및 문의</a></li> 
       <li><a href="/paoin">지면보기</a></li> 
       <li><a href="http://company.hankookilbo.com/Subscription/apply.aspx" target="_blank">구독안내</a></li> 
       <li><a href="https://hkphoto.hankookilbo.com" target="_blank">사진검색 &amp; 구매</a></li> 
      </ul> 
      <ul class="outlink-list"> 
       <li> <a href="http://yourvibes.co.kr/" target="_blank" class="link-yourvibes"> <img src="/images/logo_yourvibe.jpg" alt="your vibes"> </a> </li> 
       <li> <a href="http://www.koreatimes.co.kr/" target="_blank" class="link-koreantimes"> <img src="/images/svg/the_korean_times.svg" alt="The Korean Times"> </a> </li> 
      </ul> 
     </div> <!-- // bottom-area --> 
    </div> <!-- // container --> 
   </section> 
   <div class="subscribe-wrapper imp-mypage-subscribe new-alarm"> 
    <section class="subscribe new-alarm-sub"> 
     <div class="subscribe-handle-wrapper " draggable="true"> 
      <div class="subscribe-handle"></div> 
     </div> 
     <div class="alarm-header"> 
      <h3>알림</h3> 
      <div class="btn-con"> <button class="ala-close-btn" onclick="closeNewAlarmList()"></button> 
      </div> 
     </div> 
     <ul class="attension-list new-alarm-list" id="myAlramArea"> 
     </ul> 
     <div class="btn-container"> <button class="view-more-btn" onclick="location.href='/MyPage?Filter=Alarm'">내 알림 더보기</button> 
     </div> 
    </section> 
   </div> 
   <script>
    var encData;
    $.ajax({
        url: '/auth/cp/data',
        type: 'GET',
        dataType: 'json',
        contentType: 'application/json',
        timeout: 30000,
        success: function (response) {
            $('form input[name="EncodeData"]').val(response.data);
        },
        error: function (req, stat, err) {
            // console.log(err);
        }
    }); // ajax

    function openCpPopup() {
        if (navigator.userAgent.indexOf('Mobile-App') > -1) {
            var data = {
                type: 'SIGN_UP_NICE'
            };
            window.ReactNativeWebView.postMessage(JSON.stringify(data));
            document.form_chk.action = "https://nice.checkplus.co.kr/CheckPlusSafeModel/checkplus.cb";
            document.form_chk.submit();
        } else {
            window.open('', 'popupChk', 'width=500, height=550, top=100, left=100, fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=yes, location=no, scrollbar=no');
            document.form_chk.action = "https://nice.checkplus.co.kr/CheckPlusSafeModel/checkplus.cb";
            document.form_chk.target = "popupChk";
            document.form_chk.submit();
        }
    }

    function cpSuccess(data) {
        encData = data;
        if (authType === 'migration') {
            $.ajax({
                type: "PATCH",
                url: '/users/migration?encData=' + encodeURIComponent(encData),
                success: function (response) {
                    console.log(response);
                    if (response === true) {
                        alert('마이그레이션이 완료되었습니다.');
                        var signInUrl = Cookies.get('sign-in-url');
                        if (signInUrl) {
                            Cookies.remove('sign-in-url');
                            location.replace(signInUrl);
                        } else {
                            location.replace('/');
                        }
                    }
                }
            })
        } else {
            checkExistUserNice();
        }

    }

    function checkExistUserNice() {
        $.ajax({
            type: "GET",
            url: '/users/exist?encData=' + encodeURIComponent(encData),
            success: function (response) {
                // console.log('본인 인증 회원가입 -> 본인 중복 확인');
                // console.log(JSON.parse(response));
                // console.log(authType);
                var flag = JSON.parse(response);
                if (flag) {
                    // 중복이면 이미 가입된 회원
                    // 회원가입일 경우
                    if (authType === 'enroll') {

                        $('.popup-alert').closePopup();
                        $('#sign-up-user-exist-popup').openPopup();
                        niceVeryfiyInfo = null;
                        // 아이디 찾기일 경우
                    } else if (authType === 'idfind') {
                        $.ajax({
                            type: "GET",
                            url: '/api/users/find-id?encData=' + encodeURIComponent(encData),
                            success: function (response) {
                                // console.log(response);
                                var user = response;
                                // 사용자가 있으면
                                if (response !== null) {
                                    location.replace('/users/find-id-result?name=' + user.memName + "&mobile=" + user.memMobile + "&memId=" + user.memId)
                                    // 사용자가 없으면
                                } else {
                                    $('.popup-alert').closePopup();
                                    ('#find-id-no-account-popup').openPopup();
                                }

                            },
                            fail: function (response) {
                                // console.log('아이디 찾기 에러')
                            }
                        })
                    } else if (authType === 'pwfind') {
                        $('#change-password-popup').openPopup();
                    } else if (authType === 'pwchange') {
                        $('#my-page-edit-pw-popup').openPopup();
                    } else if (authType === 'pennamechange') {
                        $('#my-page-edit-pen-name-popup').openPopup();
                    }
                    // 본인인증으로 찾은 아이디가 없을 때
                } else {
                    // 회원가입일 경우
                    if (authType === 'enroll') {
                        signUpType = 'None';

                        location.href = '/auth/sign-up-nice?encData=' + encodeURIComponent(encData);
                        // 아이디 찾기일 경우
                    }
                    // 중복 가입이 아니면 약관 동의 화면우
                }
            },
            fail: function (error) {
                // console.log('SNS 회원가입 -> 본인 중복 확인 체크 에러');
                // console.log(JSON.parse(error.responseText));
            }
        });
    }
</script> <!-- 본인인증 서비스 팝업을 호출하기 위해서는 다음과 같은 form이 필요합니다. --> 
   <form name="form_chk" method="post"> 
    <input type="hidden" name="m" value="checkplusSerivce"> <!-- 필수 데이타로, 누락하시면 안됩니다. --> 
    <input type="hidden" name="EncodeData"> <!-- 위에서 업체정보를 암호화 한 데이타입니다. --> 
   </form> 
   <section id="sign-up-user-exist-popup" class="popup-alert" style="z-index: 100000"> 
    <div class="inner"> 
     <h1 class="title">중복 가입 확인</h1> 
     <p>이미 가입된 회원입니다.</p> 
     <div class="btn-area"> <button type="button" onclick="$(this).closest('.popup-alert').closePopup(); location.href = '/auth/sign-in'">확인</button> 
     </div> 
    </div> 
   </section> 
   <script>
  // 주제판 메뉴
  $.ajax({
    url: "/topic/pan-list",
    method: "GET",
    dataType: "text",
    contentType: "application/json",
    success: function (res) {
      let menuHtml = "";
      JSON.parse(res).forEach(el => {
        menuHtml += "<li><a href='/Topic?topicId=" + el.topicId + "'>" + el.topicTitle + "</a></li>";
      });
      $("#topic-pan-list").append(menuHtml);
    },
    fail: function (err) {
      $("#topic-pan-list").parent().remove();
    }
  });
</script> 
   <script>
  var user;

  if (Cookies.get('accessToken') != null) {
    // ui setting
    $('#logOutBtn').removeClass('blind');
    $('#logInBtn').addClass('blind');
    $('#convenient-setting').removeClass('blind');
    $('#event-receive-setting').removeClass('blind');
    $('#account-setting').removeClass('blind');

    $.ajax({
      url: '/users/me',
      type: 'GET',
      contentType: 'application/json',
      success: function (data) {
        // console.log('getuserme -> 성공');
        // console.log(data);
        user = data;
        if (data.sectionCounts !== undefined && data.sectionCounts.length > 0) {
          $('#top-area').html("<p class=\"text\" href=\"#\">\n" +
              "                    안녕하세요.\n" +
              "                    <br><span class=\"point-color\">" + data.memPenName + "</span>님은 최근 <span class=\"point-color\">" +
              data.sectionCounts[0].sectionName + "</span>기사를\n" +
              "                    <br>가장 많이 읽었습니다.\n" +
              "                </p><div class=\"btn-area\"><a href=\"/article/member-report\" class=\"inquiry\">제보 및 문의</a></div>")
        } else {
          $('#top-area').html("<p class=\"text\" href=\"#\">\n" +
              "                    안녕하세요.\n" +
              "                    <span class=\"point-color\">" + data.memPenName + "</span>님</p><div class=\"btn-area\"><a href=\"/article/member-report\" class=\"inquiry\">제보 및 문의</a></div>")
        }

        // 이벤트 및 프로모션 수신 동의 체크
        $('#email-setting-switch').prop('checked', data.eventAgreeEmail === 'Y');
        $('#sms-setting-switch').prop('checked', data.eventSmsAgree === 'Y');
        $('#nLetter-setting-switch').prop('checked', data.nLetterAgree === 'Y');
      },
      error: function (req, stat, err) {
        // console.log(err);
      }
    });
  }

  function onClickSignUp() {
    authType = 'enroll';
    Cookies.set('authType', 'enroll', {path: '/'});
    if (navigator.userAgent.indexOf('Mobile-App') > -1) {
      var data = {
        type: 'SIGN_UP_NICE'
      };
      window.ReactNativeWebView.postMessage(JSON.stringify(data));
    } else {
      openCpPopup();

    }
  }

  function onClickMyPage() {
    if (Cookies.get('accessToken') != null) {
      location.href = '/MyPage';
    } else {
      location.href = '/auth/sign-in';
    }
  }
</script> 
   <script>
  $(function () {
    let $modal = $(".subscribe-wrapper.imp-mypage-subscribe");
    let $inner = $(".subscribe.new-alarm-sub");
    let $alarmBtn = $(".btn-notice");
    let $body = $("body");

    $alarmBtn.on("click", function () {
      if (Cookies.get('accessToken') != null) {
        $modal.addClass("on");
        $body.css({"overflow": "hidden"});
        $inner.css({"top": 0});

        console.log($inner)
        $inner.draggable({
          handle: '.subscribe-handle-wrapper',
          containment: [0, 0, 0, $(window).height()],
          axis: 'y',
          stop: function (event, ui) {
            if (ui.position.top > 500) {
              $modal.removeClass('on');
              $body.css({"overflow": "auto"});
            } else {
              $inner.css({"top": ui.originalPosition.top});
            }
          },
        });
        alarmToggle();
      } else {
        location.href = '/auth/sign-in';
      }
    })
  })

  function closeNewAlarmList() {
    $(".subscribe-wrapper.imp-mypage-subscribe").removeClass("on");
    $("body").css({overflowY: "auto"});
  }

  function alarmToggle() {
    if (Cookies.get('accessToken') !== undefined) {
      $.ajax({
        url: '/users/push-myalarm-webmobile',
        method: 'GET',
        success: function (response) {
          if (response.code === '0000') {
            const data = response.data;
            let html = '';

            const listSize = data.list.length;

            if (listSize > 0) {
              for (let i = 0; i < listSize; i++) {
                const apppushType = data.list[i].apppushType;
                let typeClass = "";
                let typeNm = "";
                let pushTit = data.list[i].apppushTitle;
                let pushConts = data.list[i].apppushContents;
                const now = moment().format('YYYYMMDD');
                let sendDate = moment(data.list[i].apppushSenddate).format('YYYYMMDD');
                const afterDate = timeForToday(moment(data.list[i].apppushSenddate).format('YYYY-MM-DD hh:mm:ss'));
                let weekend = moment(sendDate).day();
                let weekendNm = '';
                switch (weekend.toString()) {
                  case '0':
                    weekendNm = '일';
                    break;
                  case '1':
                    weekendNm = '월';
                    break;
                  case '2':
                    weekendNm = '화';
                    break;
                  case '3':
                    weekendNm = '수';
                    break;
                  case '4':
                    weekendNm = '목';
                    break;
                  case '5':
                    weekendNm = '금';
                    break;
                  case '6':
                    weekendNm = '토';
                    break;
                }
                let isToday = moment(now).diff(sendDate, 'days') < 1 ? ' (오늘)' : '(' + weekendNm + ')';
                if (i > 0) {
                  let beforeIdx = Number(i - 1);
                  let tempSendDate = moment(data.list[beforeIdx].apppushSenddate).format('YYYYMMDD');
                  if (tempSendDate == moment(data.list[i].apppushSenddate).format('YYYYMMDD')) {
                    sendDate = "";
                    isToday = "";
                  }
                }
                let sendDateFormatIng = '';
                if (Boolean(sendDate)) {
                  sendDateFormatIng = moment(sendDate).format('YYYY. MM. DD');
                }

                html += ' <li class="include-date">';
                html += '     <p class="date-box">' + sendDateFormatIng + ' ' + isToday + '</p>';
                html += '     <a href="/News/Read/' + data.list[i].articleId + '">';

                let isBadgeUse = false;
                if (apppushType == 'SOKBO') {
                  typeClass = "break-mark";
                  typeNm = "속보";
                  pushConts = pushConts.replace(/\[속보\]/g, "");
                  isBadgeUse = true;
                } else if (apppushType == 'SUBSCRIBE') {
                  typeClass = "subscribe-mark";
                  typeNm = "구독";
                  pushConts = pushConts.replace(/\[구독\]/g, "");
                  isBadgeUse = true;
                } else if (apppushType == 'EXCLUSIVE') {
                  typeClass = "exclusive-mark";
                  typeNm = "단독";
                  pushConts = pushConts.replace(/\[단독\]/g, "");
                  isBadgeUse = true;
                } else {
                  isBadgeUse = false;
                }

                if(isBadgeUse) {
                  html += '     <mark class="' + typeClass + '">' + typeNm + '</mark>';
                }

                html += '     <p class="sub-tit">' + pushTit + '</p>';
                html += '         <h5>' + pushConts + '</h5>';
                html += '         <p class="date">' + afterDate + '</p>';
                html += '     </a>';
                html += ' </li>';
              }
            } else {
              html += '    <li class="no-alarm">';
              html += '        <h5>새로운 알림이 없습니다.</h5>';
              html += '    </li>';
            }
            $('#myAlramArea').html(html);
          }
        },
        fail: function (response) {
        }
      });
    }
  }

  function timeForToday(value) {
    const today = new Date();
    const timeValue = new Date(value);

    const betweenTime = Math.floor((today.getTime() - timeValue.getTime()) / 1000 / 60);
    if (betweenTime < 1) return '방금전';
    if (betweenTime < 60) {
      return betweenTime + '분전';
    }

    //메세지 수신 후 12시간이 지나면 년월일시분 노출로 요청 하여 로직 변경
    const betweenTimeHour = Math.floor(betweenTime / 60);

    if (betweenTimeHour < 12) {
        return betweenTimeHour + '시간전';
    } else {
        let timeFormating = moment(timeValue).format('hh시 mm분');
        let isAmPm = moment(timeValue).format('(a)');
        let ampmNm = '';
        switch (isAmPm) {
            case '(am)':
                ampmNm = '오전';
                break;
            case '(pm)':
                ampmNm = '오후';
                break;
        }

        return ampmNm + ' ' + timeFormating;
    }
  }
</script> 
   <section id="searchPopup" class="popup search-popup"> 
    <div class="header"> 
     <div class="left"> <!-- 검색팝업 닫기 --> <button type="button" class="btn-back" onclick="$(this).closest('.popup').closePopup();"> <span class="blind">이전</span> </button> <!-- .search-input --> 
      <div class="search-input"> 
       <input id="search-input-in-popup" type="text" placeholder="검색어 입력" autocomplete="off"> <button type="button" class="btn-search" id="btn-search"> <span class="blind">검색</span> </button> 
      </div> <!-- // .search-input --> 
     </div> 
    </div> 
    <div class="container"> <!-- .popular-word-list // 2021-04-08 노출되지않게 처리.--> <!-- //.popular-word-list --> <!-- .recent-word-list --> 
     <div class="recent-word-list"> 
      <div class="title">
       최근 검색어
      </div> 
      <div id="search-record-empty-list" class="empty-list blind">
       최근 입력한 검색어가 없습니다.
      </div> 
      <ul id="search-record-list" class="list"> 
      </ul> <!-- <ul class="no-result">
                <li>최근 검색어가 없습니다.</li>
            </ul> --> 
     </div> <!-- // .recent-word-list --> <!-- .auto-complete-list --> 
     <div class="auto-complete-list"> 
      <div class="title">
       자동 완성
      </div> 
      <ul class="list" id="auto-complete-list"> 
      </ul> 
     </div> <!-- // .auto-complete-list --> 
    </div> 
    <div class="floating-bottom"> 
     <div class="search-control"> <button id="search-record-save-off-btn" type="button">검색어 저장 끄기</button> <button id="search-record-delete-all-btn" type="button">전체삭제</button> 
     </div> 
    </div> 
   </section> 
   <script>

    var searchPopup;

    function SearchPopup() {
        // constructor() {
        this.searchText = '';
        this.$searchInput = $('#search-input-in-popup');

        this.searchRecord = [];

        // }

        this.init = function () {
            var self = this;
            // 최근검색어 initialize
            this.setSearchRecord();
            // 검색어 저장 On Off 버튼 listener 설정
            this.setSaveSearchRecordOnOffBtnListener();
            // 검색어 전체 삭제 listener 설정
            this.setSearchRecordDeleteAllListener();
            // 검색 버튼 클릭 listener 설정
            this.setSearchBtnListener();
            // 검색 input listener 설정
            this.setSearchInputListener();
            // 인기 검색어 조회
            // 2021-04-08 노출되지않게 처리.
            //this.setPopularKeyword();

            // 검색어 저장 On Off 버튼 initialize
            var searchSaveFlag = Cookies.get('save-search-record-flag');
            if (searchSaveFlag === 'true' || searchSaveFlag === undefined) {
                $('#search-record-save-off-btn').html('검색어 저장 끄기');
            } else {
                $('#search-record-save-off-btn').html('검색어 저장 켜기');
            }

            // 검색어 전체 삭제 initialize
            if (Cookies.get('search-record') !== undefined) {
                $('#search-record-delete-all-btn').attr('disabled', false);
            }
        }

        /**
         * 검색 버튼 클릭
         */
        this.setSearchBtnListener = function () {
            var self = this;
            $('#btn-search').on('click', function () {
                self.searchBySearchText();
            });
        }

        /**
         * 검색어 전체 삭제 listener
         */
        this.setSearchRecordDeleteAllListener = function () {
            var self = this;
            $('#search-record-delete-all-btn').on('click', function () {
                Cookies.remove('search-record');
                self.setSearchRecord();
            })
        };

        /**
         * 검색어 저장 on off 버튼 listener
         */
        this.setSaveSearchRecordOnOffBtnListener = function () {
            var self = this;

            $('#search-record-save-off-btn').on('click', function () {
                var flag = Cookies.get('save-search-record-flag');

                if (flag === 'true' || flag === undefined) {
                    Cookies.set('save-search-record-flag', 'false', {path: '/', expires: 60 * 60 * 24 * 265});
                    $('#search-record-save-off-btn').html('검색어 저장 켜기');
                } else {
                    Cookies.set('save-search-record-flag', 'true', {path: '/', expires: 60 * 60 * 24 * 265});
                    $('#search-record-save-off-btn').html('검색어 저장 끄기');
                }
            })
        }

        /**
         * 최근 검색어 세팅
         */
        this.setSearchRecord = function () {
            $('#search-record-list').html('');
            /**
             * 최근 검색어 쿠키에서 불러오기
             */
            var searchRecordCookie = Cookies.get('search-record');
            // 최근 검색어가 있으면
            if (searchRecordCookie !== undefined) {
                this.searchRecord = searchRecordCookie.split(',');
                // 전체 삭제 버튼 활성화
                $('#search-record-delete-all-btn').attr('disabled', false);
                // 컨테이너 css class toggle
                $('.search-toggle .recent-word').addClass('no-result');

                if (this.searchRecord.length > 0) {
                    // this.searchRecord.reverse();
                    for (var i = 0; i < this.searchRecord.length; i++) {
                        var temp = this.searchRecord[i].split('_splitter');
                        temp[0] = temp[0].replace(/</g,"&lt;").replace(/>/g,"&gt;");
                        var tempOnAtag = temp[0].replace(/\"/g,"\\\"").replace(/\'/g,"\\\'");
                        $('#search-record-list').prepend('<li>\n' +
                            '            <a href="javascript:onClickSearchRecordItem(\'' + tempOnAtag + '\')"><span>' + temp[0] + '</span></a>\n' +
                            '                <span class="date">' + temp[1] + '</span>\n' +
                            '            <button type="button" class="btn-delete" onclick="onClickDeleteSearchRecord(\'' + i + '\', event)"><span class="blind">삭제</span></button>\n' +
                            '                </li>');
                    }
                }

                $('#search-record-empty-list').addClass('blind');
                $('#search-record-list').removeClass('blind');
                // 최근 검색어가 없으면
            } else {
                // 전체 삭제 버튼 비활성화
                $('#search-record-delete-all-btn').attr('disabled', true);
                $('#search-record-empty-list').removeClass('blind');
                $('#search-record-list').addClass('blind');
                // 컨테이너 css class toggle
                $('.search-toggle .recent-word').removeClass('no-result');
            }

        }

        /**
         * 검색어로 검색
         */
        this.searchBySearchText = function () {
            // 동일한 검색어로 검색시 Return
            if (this.searchText === $('#search-input-in-popup').val()) {
                return;
            }

            this.searchText = $('#search-input-in-popup').val();
            this.saveSearchRecord();
            // console.log(this.searchText);
            // location.href = '/Search?searchText=' + encodeURIComponent(this.searchText) + '&tab=NEWS&sort=relation&searchTypeSet=TITLE,CONTENTS&realPaperYN=false&selectedPeriod=slide&sections=SOCIETY,ECONOMY,OPINION,WORLD,ENTER,POLITICS,CULTURE,SPORTS,LOCAL,FOCUS';
            location.href = _searchHost + '/Search?searchText=' + encodeURIComponent(this.searchText);
        };
        /**
         * 최근 검색 기록 추가
         */
        this.saveSearchRecord = function () {
            // 빈 값 검색하면 넣지 않는다
            if ($('#search-input-in-popup').val() === '') {
                return;
            }
            var searchSaveFlag = Cookies.get('save-search-record-flag');

            // 검색어 저장이 true 이면
            if (searchSaveFlag === 'true' || searchSaveFlag === undefined) {
                var now = new Date();
                var ymd = now.getFullYear() + "." + ('0' + (now.getMonth() + 1)).slice(-2) + "." + now.getDate();
                var searchRecord = Cookies.get('search-record');

                // 빈 값이 아니면
                if (searchRecord !== undefined) {
                    var searchRecordList = searchRecord.split(',');

                    if (searchRecordList.length === 10) {
                        searchRecordList.reverse();
                        searchRecordList.pop();
                        searchRecordList.reverse();
                        searchRecord = searchRecordList.join(',');
                    }

                    searchRecord += ',' + $('#search-input-in-popup').val() + "_splitter" + ymd;
                } else {
                    searchRecord = $('#search-input-in-popup').val() + "_splitter" + ymd;
                }

                Cookies.set('search-record', searchRecord, {path: '/', expires: 60 * 60 * 24 * 265});

                this.setSearchRecord();
            }
        }

        /**
         * 검색어 input 리스너 세팅
         */
        this.setSearchInputListener = function () {
            // var self = this;
            // this.$searchInput.on('keyup', function (key) {
            //         //키가 13이면 실행 (엔터는 13)
            //         if (key.keyCode == 13) {
            //             self.searchBySearchText();
            //         }
            //
            //         var param = {
            //             "query": {
            //                 "bool": {
            //                     "should": [{
            //                         "term": {
            //                             "PHRASE_Ngram": Hangul.disassemble(key.target.value).join('')
            //                         }
            //                     }],
            //                     "minimum_should_match": 1
            //                 }
            //             }
            //         };
            //
            //         var relatedSearchKeywordList = '';
            //         $.ajax({
            //             url: "/Search-auto-complete",
            //             method: "POST",
            //             contentType: 'application/json',
            //             data: JSON.stringify(param),
            //             success: function (response) {
            //                 var $autoCompleteList = $('#auto-complete-list');
            //                 $autoCompleteList.html('');
            //
            //                 for (var i = 0; i < response.length; i++) {
            //                     var autocompleteItem = '<li><a id="relatedKeywordItem' + i + '" href="'+_searchHost+'/Search?searchText="> ' + response[i]._id + '</a></li>';
            //                     // autocompleteItem = autocompleteItem.replace(key.target.value, '<span class="point-word">' + key.target.value + '</span>');
            //                     $autoCompleteList.append(autocompleteItem);
            //
            //                     var $autocompleteItem = $('relatedKeywordItem' + i);
            //                     var text = $autocompleteItem.text();
            //                     text = text.replace(key.target.value, '<span class="point-word">' + key.target.value + '</span>');
            //                     $autocompleteItem.html(text);
            //
            //                     $('#relatedKeywordItem' + i).attr('href', _searchHost+'/Search?searchText=' + response[i]._id);
            //                     if (i === 0) {
            //                         relatedSearchKeywordList = response[i]._id;
            //                     } else {
            //                         relatedSearchKeywordList += ',' + response[i]._id;
            //                     }
            //                 }
            //
            //                 Cookies.set('relatedSearchKeyword', relatedSearchKeywordList);
            //
            //             },
            //             fail: function (err) {
            //                 // console.log('댓글 등록 -> 댓글 등록 에러');
            //             }
            //         });
            //     }
            // )
            // ;
        }

        /**
         * 인기 검색어 조회
         */
        this.setPopularKeyword = function () {
            $.ajax({
                url: "/Search-popular-keyword",
                method: "GET",
                success: function (response) {
                    // console.log('인기 검색어 조회 성공');
                    // console.log(response);
                    var popularKeywordList = response;
                    var metaKeywordList = [];

                    if (popularKeywordList.length > 0) {
                        for (var i = 0; i < 20; i++) {
                            var item = popularKeywordList[i];
                            metaKeywordList.push(item.topic);
                            if (i % 4 === 0) {
                                $('#popular-keyword-list').append('<li><a\n' +
                                    '                    href="'+_searchHost+'/Search?searchText=' + encodeURIComponent(item.topic) +'">' + item.topic +'</a>\n' +
                                    '                </li>');
                            }

                            // 인기 검색어는 5개 까지만 넣는다.
                            if (metaKeywordList.length === 5) {
                                break;
                            }

                        }
                        $('meta[name="news_keywords"]').attr('content', metaKeywordList.join(","));
                    }
                },
                fail: function (err) {
                    // console.log('댓글 등록 -> 댓글 등록 에러');
                }
            });
        }
    }


    //////////////////////////////
    ////// html용 함수들 /////////////
    //////////////////////////////

    function onClickDeleteSearchRecord(index, event) {
        // Prevent Submit Form Tag
        event.preventDefault();
        event.stopImmediatePropagation();

        // 해당 인덱스 삭제
        searchPopup.searchRecord.splice(index, 1);

        if (searchPopup.searchRecord.join(',') !== '') {
            Cookies.set('search-record', searchPopup.searchRecord.join(','), {path: '/', expires: 60 * 60 * 24 * 265});
        } else {
            document.cookie = "search-record= ; expires = Thu, 01 Jan 1970 00:00:00 GMT";
        }
        searchPopup.setSearchRecord();
    }

    function onClickSearchRecordItem(searchText) {
        // location.href = '/Search?searchText=' + encodeURIComponent(searchText) + '&tab=NEWS&sort=relation&searchTypeSet=TITLE,CONTENTS&realPaperYN=false&selectedPeriod=slide&sections=SOCIETY,ECONOMY,OPINION,WORLD,ENTER,POLITICS,CULTURE,SPORTS,LOCAL,FOCUS';
        location.href = _searchHost + '/Search?searchText=' + encodeURIComponent(searchText);
    }


    $(document).ready(function () {
        searchPopup = new SearchPopup();
        searchPopup.init();
    })


</script> 
   <script>
    // 엔드페이지 진입시 마지막 읽은 기사를 DB에 저장
    var param = {lastReadArticleId: 'A2022032411350002138'};
    $.ajax({
        url: '/users/me',
        method: 'PATCH',
        contentType: 'application/json',
        data: JSON.stringify(param),
        success: function (response) {
            // console.log(response);
            var flag = response;
            if (flag) {
                // console.log('이어보기 기사 추가 성공')
            } else {
                // console.log('이어보기 기사 추가 실패')
            }
        }
    });

    if (Cookies.get('prev_article')) {
        $('#top-right-back-btn').addClass('blind');
    } else {
        $('#top-right-back-btn').removeClass('blind');
    }

    function onClickLogo() {
        removeLastReadArticle();
        location.replace('https://m.hankookilbo.com');
    }

    $(document).ready(function() {
        //로그인 하지 않고 기사를 보았을때 쿠키에 하루도안 담고 로그인 하면 읽은 기사에 담기
        // 로그인 flag
        loggedIn = Cookies.get('accessToken');
        if (!loggedIn) {
            if(Cookies.get('view_article') == "undefined" || Cookies.get('view_article') == "" || Cookies.get('view_article') == null){
                Cookies.set('view_article', 'A2022032411350002138', {path: '/', expires: 60 * 60 * 24 * 265});
            }else{
                Cookies.set('view_article', Cookies.get('view_article')+','+'A2022032411350002138', {path: '/', expires: 1});
            }
        }else{
            if(Cookies.get('view_article') != "undefined" && Cookies.get('view_article') != null && Cookies.get('view_article') != "") {
                $.ajax({
                    url: "/users/view_article",
                    contentType: 'application/json',
                    method: 'POST',
                    data: JSON.stringify({
                        view_article: Cookies.get('view_article')
                    }),
                    success: function (response) {
                        var flag = response;
                        if (flag) {
                            Cookies.remove('view_article');
                        } else {
                            console.log('기사 구독 -> 실패')
                        }
                    },
                    fail: function () {
                        // console.log('기사 구독 -> 에러')
                    }
                });
            }

        }

        history.pushState(null, null, location.href);
        window.onpopstate = function(event) {
            removeLastReadArticle();
            history.back()
        }
    });

</script> <!-- // top --> <!-- container end --> 
   <div class="container imp-end"> <!-- end-top --> 
    <div class="end-top"> 
     <div class="inn"> 
      <div class="ttl">
       <a href="/Collect/S2022030415260005356">페미니즘을 거부하는 당신에게</a>
      </div> 
      <h2 class="title"> "혐오 메일 보내주신", 페미니즘을 거부하는 당신에게 답합니다</h2> 
      <div class="info"> 
       <dl class="wrt-text"> 
        <dt>
         입력
        </dt> 
        <dd>
         2022.03.24 13:37
        </dd> 
        <dt>
         수정
        </dt> 
        <dd>
         2022.03.24 13:57
        </dd> 
       </dl> 
      </div> 
      <div class="info"> 
       <div class="name-box"> <a href="/jpage/hoihoi"> <span class="nm">전혼잎</span> <span class="role">기자</span> </a> 
       </div> <a href="#" class="btn-subsc" data-size="xs" onclick="onClickSubscribeArticleBtn('JPAGE'); return false;">구독</a> 
       <div class="tool-bar"> 
        <div class="btn-like-all-wrap"> <button type="button" class="btn-like-all"> <span class="blind">좋아요</span> <span id="top-sympathy-cnt" class="count"></span> </button> 
         <div class="like-cont"> <span id="top-like-cnt" class="like"><span class="blind">좋아요</span>0</span> <span id="top-dislike-cnt" class="unlike"><span class="blind">싫어요</span>0</span> 
         </div> <button type="button" class="btn-comment"> <span class="blind">댓글달기</span> <span id="top-comment-cnt" class="count">0</span> </button> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> <!-- // end-top --> <!-- end-body --> 
    <div class="end-body"> 
     <p class="sub-tit-ll"> </p> 
     <div class="editor-img-box">
      <img src="https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/fd7a627d-c3b1-4483-a8d5-89c3619b42d8.jpg">
      <div class="caption">
       <p>한국일보 자료사진</p>
      </div>
     </div>
     <p class="editor-p">한국일보는 114주년 세계 여성의 날(3월 8일)을 맞아 <strong>'페미니즘을 거부하는 당신에게'</strong>(관련 기사: https://www.hankookilbo.com/Collect/7231)라는 기획 보도를 했습니다. 성평등에 가장 뒤쳐진 국가이면서도, 여성혐오로 얼룩진 사회에 대한 진단이었습니다. 특히 최근 페미니즘이 사회의 적폐로 통하는 사실에 주목, 페미니즘이 왜 이런 취급을 받게 되었는지를 살펴봤습니다. 너무 오랜시간 자연스러웠기에 미처 깨닫지 못하는 여성혐오와 페미니즘을 향한 오해도 짚어봤죠. </p>
     <p class="editor-p">워낙 온·오프라인을 가리지 않고 뜨거운 주제이기에 기사에는 적지 않은 관심이 쏟아졌습니다. 기사를 작성한 기자들의 메일함에도 성원, 혹은 비난이 이어졌는데요. 후속 기사로 메일을 통해 주신 질문과 궁금증에 답해보려고 합니다.</p>
     <div class="div-line"></div>
     <h3 class="editor-tit">한국 페미니즘은 변질됐다?</h3>
     <div class="ad-banner"> 
      <script>
        var is_ins = false;
        
                var adArray = ['endpage@divideshort01', 'endpage@divideshort02', 'endpage@divideshort03'];
            

        // 중복 처리
        var $divideList = $('.ad-banner');
        if ($divideList.length) {
            for (var i = 0; i < $divideList.length; i++) {
                var id = $($divideList[i]).find('.img-box').attr('data-id');
                var adIndex = adArray.indexOf(id);
                if (adIndex > -1) {
                    adArray.splice(adIndex, 1);
                }
            }
        }

        
            var adIndex = 0;
            document.write('<div class="img-box" data-id="' + adArray[adIndex] + '">');
            document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/' + adArray[adIndex] + '"><\/script>');
            document.write('</div>');
        

        // 안드로이드 업데이트용
        if (location.href.indexOf('/News/Read') > -1 && navigator.userAgent.indexOf('Update') > -1) {
            $('.end-ad-container').addClass('blind');
        }
    </script> 
     </div> 
     <div class="editor-img-box">
      <img src="https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/25d9a46a-fd14-4f5f-a024-4cdee1c3cc22.jpg" style="width: 611px; margin-left: auto; margin-right: auto;">
      <div class="caption">
       <p>한국의 페미니즘은 외국과 다름을 지적하는 한 독자의 메일. </p>
      </div>
     </div>
     <p class="editor-p">한 독자는 한국의 페미니즘은 '뷔페미니즘(뷔페+페미니즘의 합성어)'라면서 뷔페에서 원하는 음식을 골라먹는 모습에 빗대 이득만 취하려고 한다고 지적했습니다. 국내 페미니즘의 '변질'은 많은 비(非) 혹은 반(反) 페미니즘 진영에서 말하는 문제이기도 합니다. <strong>사회에서 지나친 '여성 우대 정책'을 펼친다는 것인데, 정작 우대 정책의 실체는 베일에 가려져있습니다</strong>. </p>
     <p class="editor-p">한국일보가 만난 전문가들은 정작 여성 우대 정책은 '없다'라고 말합니다. <strong>양성평등채용목표제로 구제된 남성이 여성의 두 배 이상이라는 점은 주지의 사실</strong>입니다. 또 국내 민간 기업에서 여성 할당제는 존재하지 않습니다. 정치권이나 국공립대·공기업 등 일부 분야에서만 고위직에 한정, 유지되고 있죠. 자산 2조원 이상 상장기업이 이사회를 특정 성(性)으로만 구성하지 못하도록 한 개정 자본시장법이 오는 8월 시행되지만, 이는 양성 모두에 해당합니다. </p>
     <div class="ad-banner"> 
      <script>
        var is_ins = false;
        
                var adArray = ['endpage@divideshort01', 'endpage@divideshort02', 'endpage@divideshort03'];
            

        // 중복 처리
        var $divideList = $('.ad-banner');
        if ($divideList.length) {
            for (var i = 0; i < $divideList.length; i++) {
                var id = $($divideList[i]).find('.img-box').attr('data-id');
                var adIndex = adArray.indexOf(id);
                if (adIndex > -1) {
                    adArray.splice(adIndex, 1);
                }
            }
        }

        
            var adIndex = 0;
            document.write('<div class="img-box" data-id="' + adArray[adIndex] + '">');
            document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/' + adArray[adIndex] + '"><\/script>');
            document.write('</div>');
        

        // 안드로이드 업데이트용
        if (location.href.indexOf('/News/Read') > -1 && navigator.userAgent.indexOf('Update') > -1) {
            $('.end-ad-container').addClass('blind');
        }
    </script> 
     </div> 
     <p class="editor-p">페미니즘이 '변질되지 않았다'는<strong> 해외에도 여성 할당제는 있습니다. 오히려 한국보다 더욱 강력한 제도입니다. 노르웨이는 여성이사 40% 할당제를 시행했고, 독일은 기업과 각 부문의 여성 임원 비율을 30% 이상으로 하는 법률을 통과</strong>시켰습니다. 최근에는 유럽연합(EU) 차원에서도 여성 할당제 확대에 나서는 분위기입니다.</p>
     <div class="module-link" contenteditable="false" data-fileid="7025a52d-4b48-4e02-b4e9-99a5efc5044f" data-moduleid="6d8b4e85-8a15-4aff-949b-b67e5266ce2a" data-moduletype="LINK" style="padding:50px 0;">
      <div style="border:1px solid #ccc;background-color:#fff;">
       <div>
        <img src="https://newsimg-hams.hankookilbo.com/2022/02/21/68d57479-a211-4527-99d0-3486807d0a1a.jpg?t=20220324030234" width="100%" style="overflow:hidden;display:block;">
       </div>
       <div style="padding:20px;">
        <strong style="overflow:hidden;display:block;line-height:24px;font-size:18px;color:#111;font-weight:normal;letter-spacing:-0.64px;white-space:nowrap;text-overflow:ellipsis;">국제사회 공인 성평등 후진국인데, 페미니즘에 분노?</strong><span style="overflow:hidden;display:block;margin:8px 0;line-height:24px;font-size:14px;color:#999;letter-spacing:-0.5px;white-space:nowrap;text-overflow:ellipsis;">[페미니즘을 거부하는 당신에게]</span><a href="https://www.hankookilbo.com/News/Read/A2022022109580002090?t=20220324030234" style="display:inline-block;line-height:24px;font-size:14px;color:#01a832;letter-spacing:-0.5px;text-decoration:none;">https://www.hankookilbo.com/News/Read/A2022022109580002090?t=20220324030234</a>
       </div>
      </div>
     </div>
     <p class="editor-p"><br></p>
     <div class="div-line"></div>
     <h3 class="editor-tit">여자는 군대도 안 가면서!</h3>
     <div class="editor-img-box">
      <img src="https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/458ac0a0-e8bf-4d0b-b39e-8e6670c1255d.jpg">
      <div class="caption">
       <p>여성경찰을 향한 혐오가 여성혐오라는 사실에 반박하는 한 독자의 메일. </p>
      </div>
     </div>
     <p class="editor-p">2화 보도("남경 무용론이" "남성BJ 선물공세로"... 이런 기사, 어색한가요?)에서는 여성혐오 기사의 성별을 바꾸는 '미러링'을 시도해봤습니다. 여성 경찰 무용론이나 가해자가 아닌 피해자를 ○○녀라고 명명하는 등 유독 여성의 경우에만 성별을 앞세우는 보도 관행에 대한 반성이었습니다.</p>
     <p class="editor-p">또 다른 독자는 이 기사에 여성은 신체적 한계를 이유로 '의무병역'을 하지 않기에 남성 중심의 집단인 군인, 경찰, 소방관 등이 됐을 때 비판을 받는 일은 당연하다고 말했습니다. </p>
     <p class="editor-p">그러나 <strong>군대를 남성만의 조직으로 만든 것은 페미니즘이 아니라 가부장제</strong>입니다. 여성은 국가의 안보를 책임지는 일을 할 수 없는 존재라고 여겼기에 복무 대상에서 제외시킨 것입니다. 이 내용은 기획 보도 3화("여자도 군대 가"란 말도 페미니즘입니다)에서 이미 다뤘습니다. </p>
     <p class="editor-p">여전히 의문이 남는다면 김엘리 성공회대 시민평화대학원 외래교수의 책 '여자도 군대 가라는 말'을 읽어보시는 일도 추천드립니다.</p>
     <div class="module-link" contenteditable="false" data-fileid="078914cb-a18a-4191-b240-55295d08497c" data-moduleid="18bc97f6-90f9-4638-aee1-e25b91de816c" data-moduletype="LINK" style="padding:50px 0;">
      <div style="border:1px solid #ccc;background-color:#fff;">
       <div>
        <img src="https://newsimg-hams.hankookilbo.com/2022/03/20/e9d18584-51b0-4e6a-839a-4c2db92d2721.jpg?t=20220324010946" width="100%" style="overflow:hidden;display:block;">
       </div>
       <div style="padding:20px;">
        <strong style="overflow:hidden;display:block;line-height:24px;font-size:18px;color:#111;font-weight:normal;letter-spacing:-0.64px;white-space:nowrap;text-overflow:ellipsis;">"여자도 군대 가"란 말도 페미니즘입니다</strong><span style="overflow:hidden;display:block;margin:8px 0;line-height:24px;font-size:14px;color:#999;letter-spacing:-0.5px;white-space:nowrap;text-overflow:ellipsis;">알고 보면, 당신도 페미니스트</span><a href="https://www.hankookilbo.com/News/Read/A2022032013040003514?t=20220324010946" style="display:inline-block;line-height:24px;font-size:14px;color:#01a832;letter-spacing:-0.5px;text-decoration:none;">https://www.hankookilbo.com/News/Read/A2022032013040003514?t=20220324010946</a>
       </div>
      </div>
     </div>
     <p class="editor-p"><br></p>
     <div class="div-line"></div>
     <h3 class="editor-tit">혐오는 또 다른 혐오를 부른다</h3>
     <div class="editor-img-box">
      <img src="https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/eb83a9c0-6b93-40cc-aa67-7d4a80f0c657.jpg" style="width: 470px; margin-left: auto; margin-right: auto;">
      <div class="caption">
       <p>본보 '페미니즘을 거부하는 당신에게' 기사를 쓴 기자들에게 각각 도착한 악성 메일. </p>
      </div>
     </div>
     <p class="editor-p">별 다른 내용 없이 대뜸 욕설을 내뱉는 반응도 있었습니다. 드문 일은 아닙니다. 한국언론진흥재단이 지난해 404명의 기자를 대상으로 한 조사에서도 기자 이름을 부르며 모욕하는 경우를 경험했다는 응답은 신문사(78.4%), 방송사(83.3%), 뉴스통신사(89.2%) 등 기자 대다수에게서 나왔습니다. 특히 페미니즘 관련 기사를 쓴다면 '당연히' 이런 욕설이 쏟아질 거라고 예상할 수 있을 정도죠.</p>
     <p class="editor-p">특이한 메일은 아니지만, 욕설에 하나같이 '병X'이라는, 장애인 비하가 들어가기에 이를 소개하게 됐습니다. <strong>장애와 질병을 뜻하는 단어는 욕이 될 수 없습니다. </strong>보도를 향한 비판과 문제 제기는 분명히 의미있는 행동입니다. 그러나 혐오를 동력삼은 막무가내 공격은 제 아무리 훌륭한 의도더라도 귀담아 듣기 어렵습니다. </p>
     <p class="editor-p">물론 이번 보도에 보여준 관심 모두가 이런 방향이었던 것은 아닙니다. 한 독자는 "기자님의 글로 인식개선에 1명이라도 도움이 되었다면 저는 정말 좋은 글이라고 생각해요"라는 메일을 보내주셨습니다. 또 "이제부터라도 페미니즘을 공부해보려고 한다" "지금 시점에 필요한 기사"라는 반응도 있었습니다.</p>
     <div class="div-line"></div>
     <h3 class="editor-tit">진정한 페미니즘을 위하여</h3>
     <div class="editor-img-box">
      <img src="https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/34595ed5-6bd5-4463-9c8e-a0c6982f2d01.jpg">
      <div class="caption">
       <p>'세계 여성의 날' 114주년인 지난 8일 서울시청 앞 도로에서 민주노총 주최로 열린 세계 여성의날 정신 계승 성평등 운동회에서 민주노총과 산하 여성단체 등 참가자들이 행진을 하고 있다. 뉴시스</p>
      </div>
     </div>
     <p class="editor-p">'진정한 페미니즘'은 과연 무엇일까요. 아직 우리는 "이 단어에 대한 사회적 합의가 없고"(김수아 서울대 언론정보학 교수) "페미니즘이 무엇인지도 잘 모르는"(허민숙 국회 입법조사관) 상황입니다. </p>
     <p class="editor-p">사실 페미니즘은 하나의 의미로 규정짓기 어렵습니다. 신경아 한림대 사회학과 교수는 "페미니즘 자체는 민주주의라는 말과 같아서 수십개 갈래가 있다"라고 했습니다. 백 명의 사람이 있다면 백 개의 각기 다른 페미니즘이 있을 수 있다는 의미입니다.</p>
     <p class="editor-p">다만 하나만은 확실합니다. 다시 과거로 돌아가지는 않을 겁니다. 허 입법조사관은 "<strong>여성혐오는 결국 과거로 돌아가라는 것"이라면서 "유색인종과 동등해지는 것을 참지 못하는 백인이 혐오감을 드러내는 인종혐오와 여성혐오는 마찬가지</strong>"라고 설명했습니다. 그러면서 "혐오와 폭력은 우리가 완전히 동등하고 다르지 않다는 사실을 인정할 때 비로소 사라진다"라고 덧붙였습니다. </p>
     <div class="writer">
      <span class="name"> <strong> 전혼잎 </strong> 기자<span class="email"> hoihoi@hankookilbo.com </span> </span>
     </div>
     <div class="writer">
      <span class="name"> <strong> 최나실 </strong> 기자<span class="email"> verite@hankookilbo.com </span> </span>
     </div>
     <div class="writer">
      <span class="name"> <strong> 최은서 </strong> 기자<span class="email"> silver@hankookilbo.com </span> </span>
     </div>
     <div class="btn-area"> <button class="btn-like" title="공감"> <span id="bottom-like-cnt" class="count">0</span> </button> <button class="btn-unlike" title="비공감"> <span id="bottom-dislike-cnt" class="count">0</span> </button> <button class="btn-share"> <span class="text">공유</span> </button> <button class="btn-save" onclick="onClickSaveArticleBtn()"> <span class="text">저장</span> </button> <button class="btn-goto-comment"> <span class="text">댓글</span> </button> 
     </div> 
    </div> <!-- // end-body --> 
    <div class="end-bottom"> 
     <div class="related-news-list"> 
      <h3>관련기사</h3> 
      <ul> 
       <li> <a href="/News/Read/A2022032013040003514?rPrev=A2022032411350002138" target="_self"> "여자도 군대 가"란 말도 페미니즘입니다</a> </li> 
       <li> <a href="/News/Read/A2022022415050002043?rPrev=A2022032411350002138" target="_self"> "남경 무용론이..." "남성BJ 선물공세로"... 이런 기사, 어색한가요?</a> </li> 
       <li> <a href="/News/Read/A2022022109580002090?rPrev=A2022032411350002138" target="_self"> 국제사회 공인 성평등 후진국인데, 페미니즘에 분노?</a> </li> 
       <li> <a href="/News/Read/A2022022309030002990?rPrev=A2022032411350002138" target="_self"> 금기어 된 성평등 공약… 대선의 시계는 거꾸로 갔다</a> </li> 
       <li> <a href="/News/Read/A2022030408510000423?rPrev=A2022032411350002138" target="_self"> '여혐'을 선거 전략으로 내세운 초유의 대선</a> </li> 
      </ul> 
     </div> 
     <div class="edit-subscribe"> 
      <div class="tit-text"> <strong> <a href="/Collect/S2022030415260005356"> 페미니즘을 거부하는 당신에게</a> </strong> <button type="button" class="btn-subsc" onclick="onClickSubscribeArticleBtn('TAG')">구독</button> 
      </div> 
     </div> 
     <div class="hk-banner"> 
      <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/m_newbylow@468x90"></script> 
     </div> 
     <div class="copy-text">
       세상을 보는 균형, 한국일보 <span class="roboto">Copyright © Hankookilbo</span> 
     </div> 
    </div> 
    <div class="ad-banner"> 
     <script>
        var is_ins = false;
        
            var adArray = ['mobile_endpag_3@300x250'];
            

        // 중복 처리
        var $divideList = $('.ad-banner');
        if ($divideList.length) {
            for (var i = 0; i < $divideList.length; i++) {
                var id = $($divideList[i]).find('.img-box').attr('data-id');
                var adIndex = adArray.indexOf(id);
                if (adIndex > -1) {
                    adArray.splice(adIndex, 1);
                }
            }
        }

        
            for (var i = 0; i < 1; i++) {
                if(adArray[i] == 'ins' && is_ins){
                    // document.write('<div class="img-box" data-id="22268266355">');
                    // document.write('<ins class="adsbyaiinad" data-aiinad-inv="22268266355"></ins>');
                    // document.write('</div>');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/endpage@dividelong02"><\/script>');
                }else{
                    document.write('<div class="img-box" data-id="' + adArray[i] + '">');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/' + adArray[i] + '"><\/script>');
                    document.write('</div>');
                }

            }
        

        // 안드로이드 업데이트용
        if (location.href.indexOf('/News/Read') > -1 && navigator.userAgent.indexOf('Update') > -1) {
            $('.end-ad-container').addClass('blind');
        }
    </script> 
    </div> <!-- Begin Dable 기사하단_리스트 / For inquiries, visit http://dable.io --> 
    <div class="end-ad-container dable"> 
     <div id="dablewidget_2Xn48k7d" class="dable-widget-light" data-widget_id="2Xn48k7d"> 
      <script>
            dable('renderWidget', 'dablewidget_2Xn48k7d', {ignore_items: true});
        </script> 
     </div> 
     <div id="dablewidget_3o5R3Ne7" class="dable-widget-dark" data-widget_id="3o5R3Ne7"> 
      <script>
            dable('renderWidget', 'dablewidget_3o5R3Ne7', {ignore_items: true});
        </script> 
     </div> 
    </div> <!-- ad-banner --> 
    <div class="ad-banner"> 
     <script>
        var is_ins = false;
        
            var adArray = ['mobile_endpag_1@300x250'];
            

        // 중복 처리
        var $divideList = $('.ad-banner');
        if ($divideList.length) {
            for (var i = 0; i < $divideList.length; i++) {
                var id = $($divideList[i]).find('.img-box').attr('data-id');
                var adIndex = adArray.indexOf(id);
                if (adIndex > -1) {
                    adArray.splice(adIndex, 1);
                }
            }
        }

        
            for (var i = 0; i < 1; i++) {
                if(adArray[i] == 'ins' && is_ins){
                    // document.write('<div class="img-box" data-id="22268266355">');
                    // document.write('<ins class="adsbyaiinad" data-aiinad-inv="22268266355"></ins>');
                    // document.write('</div>');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/endpage@dividelong02"><\/script>');
                }else{
                    document.write('<div class="img-box" data-id="' + adArray[i] + '">');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/' + adArray[i] + '"><\/script>');
                    document.write('</div>');
                }

            }
        

        // 안드로이드 업데이트용
        if (location.href.indexOf('/News/Read') > -1 && navigator.userAgent.indexOf('Update') > -1) {
            $('.end-ad-container').addClass('blind');
        }
    </script> 
    </div> <!-- .slider-wrap --> 
    <div class="card-slider more-articles" data-el="sideLiveIssue"> 
     <h3>당신이 관심 있을만한 이슈</h3> 
     <ul class="card-list slick-slider" data-el="sideLiveIssueList"></ul> 
    </div> 
    <script>
    (function() {
        function getRecentIssues(pageNum) {
            var url = '/api/section/bottom-liveissues?Page=' + (pageNum || 1);
            // console.log('라이브 이슈 최근 이슈 조회 -> ' + url);
            $.ajax({
                url: url,
                method: 'GET',
                contentType: 'application/json',
                success: function (response) {
                    var pageableResult = response;
                    response.list = response.list || [];
                    pageableResult.list = response.list.length > 3 ? response.list.slice(0, 4) : response.list
                    // 초기화
                    $('ul[data-el="sideLiveIssueList"]').html('');

                    /**
                     * 최근 이슈
                     */
                    for (var i = 0; i < pageableResult.list.length; i++) {
                        var item = pageableResult.list[i];
                        var article = item.articles.length ? item.articles[0] : null;
                        var articleImagePath = article ? getArticleThumbnailFilePath($('#fileServer').val(), article.articleId, article.repAttach) : '/images/Default-Image.png';
                        var appendItem = '';
                        appendItem += '<li class="item">' +
                            '<div class="item-inner">' +
                            '  <div class="img-card-wrapper">' +
                            '    <div class="hash">' +
                            '      <a href="/Liveissue/' + item.liveIssueId + '">' + item.liveIssueName + '</a>' +
                            '    </div>' +
                            '    <div class="related-count">' +
                            '      <a href="/Liveissue/' + item.liveIssueId + '">' +
                            '        관련기사 <span class="cnt-num">' + item.articleCnt + '</span>' +
                            '      </a>' +
                            '    </div>' +
                            '    <a href="/News/Read/' + article.articleId + '">' +
                            '      <div class="img-box">' +
                            '        <img src="' + articleImagePath + '" alt="' + article.articleTitle + '">' +
                            '      </div>' +
                            '      <div class="title">' + article.articleTitle + '</div>' +
                            '      <div class="text ellipsis multiline two">' + article.articleFrontPanContents + '</div>' +
                            '    </a>' +
                            '  </div>' +
                            '</div>' +
                            '</li>';

                        $('ul[data-el="sideLiveIssueList"]').append(appendItem)
                    }
                    // slick refresh
                    if ($('ul[data-el="sideLiveIssueList"]')[0].slick) {
                        $('ul[data-el="sideLiveIssueList"]')[0].slick.refresh();
                    }
                },
                error: function(){
                    $('div[data-el="sideLiveIssue"]').hide();
                }
            })
        }
        //
        function getTopIssues(pageNum) {
            var url = '/api/section/LIVEISSUE/page';
            $.ajax({
                url: url,
                method: 'GET',
                contentType: 'application/json',
                success: function(res){
                    var issuccess = false;
                    var contents = [];
                    if(Array.isArray(res.areas) && res.areas.length > 0){
                        var data = res.areas[0] || {};
                        var area = data.area || {};
                        var subAreas = data.subAreas;
                        if(area.areaType == "AREA_1" && Array.isArray(subAreas)){
                            issuccess = true;
                            contents = (subAreas[0] || {})['contents'] || [];
                        }
                    }

                    if(issuccess===false || contents.length < 1){
                        $('div[data-el="sideLiveIssue"]').hide();
                        return;
                    }

                    var i=0, html = '', obj, article;
                    contents = contents.length > 3 ? contents.slice(0, 3) : contents;
                    for(;i<contents.length;i+=1){
                        item = contents[i];
                        article = item.article;
                        var articleImagePath = article ? getArticleThumbnailFilePath($('#fileServer').val(), article.articleId, article.repAttach) : '/images/Default-Image.png';

                        html += '<li class="item">' +
                            '<div class="item-inner">' +
                            '  <div class="img-card-wrapper">' +
                            '    <div class="hash">' +
                            '      <a href="/Liveissue/' + item.liveIssueId + '">' + item.liveIssueName + '</a>' +
                            '    </div>' +
                            '    <div class="related-count">' +
                            '      <a href="/Liveissue/' + item.liveIssueId + '">' +
                            '        관련기사 <span class="cnt-num">' + item.articleCnt + '</span>' +
                            '      </a>' +
                            '    </div>' +
                            '    <a href="/News/Read/' + article.articleId + '">' +
                            '      <div class="img-box ">' +
                            '        <img src="' + articleImagePath + '" alt="' + article.articleTitle + '">' +
                            '      </div>' +
                            '      <div class="title">' + article.articleTitle + '</div>' +
                            '      <div class="text ellipsis multiline two">' + article.articleFrontPanContents + '</div>' +
                            '    </a>' +
                            '  </div>' +
                            '</div>' +
                            '</li>';
                    }
                    $('ul[data-el="sideLiveIssueList"]').empty().html(html)
                    // slick refresh
                    if ($('ul[data-el="sideLiveIssueList"]')[0].slick) {
                        $('ul[data-el="sideLiveIssueList"]')[0].slick.refresh();
                    }
                },
                error: function(err){
                    $('div[data-el="sideLiveIssue"]').hide();
                }
            })
        }

        //getRecentIssues();
        getTopIssues();
    })();
</script> 
    <div class="ad-banner"> 
     <script>
        var is_ins = false;
        
            var adArray = ['mobile_endpag_2@300x250"'];
            

        // 중복 처리
        var $divideList = $('.ad-banner');
        if ($divideList.length) {
            for (var i = 0; i < $divideList.length; i++) {
                var id = $($divideList[i]).find('.img-box').attr('data-id');
                var adIndex = adArray.indexOf(id);
                if (adIndex > -1) {
                    adArray.splice(adIndex, 1);
                }
            }
        }

        
            for (var i = 0; i < 1; i++) {
                if(adArray[i] == 'ins' && is_ins){
                    // document.write('<div class="img-box" data-id="22268266355">');
                    // document.write('<ins class="adsbyaiinad" data-aiinad-inv="22268266355"></ins>');
                    // document.write('</div>');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/endpage@dividelong02"><\/script>');
                }else{
                    document.write('<div class="img-box" data-id="' + adArray[i] + '">');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/' + adArray[i] + '"><\/script>');
                    document.write('</div>');
                }

            }
        

        // 안드로이드 업데이트용
        if (location.href.indexOf('/News/Read') > -1 && navigator.userAgent.indexOf('Update') > -1) {
            $('.end-ad-container').addClass('blind');
        }
    </script> 
    </div> <!-- comment-area --> 
    <div class="comment-area"> <!-- comment-title --> 
     <h3 class="comment-title">댓글 <span class="count">1,324</span></h3> <!-- // comment-title --> <!-- comment-edit --> 
     <div class="comment-edit"> <button onclick="onFocusInput()" id="commentInputContainer" type="button" class="btn-open-edit"> 댓글을 입력해 주세요. <span class="btn-reg">등록</span> </button> 
      <div class="textarea-wrap"> 
       <div class="textarea"> <textarea id="commentInput" rows="2" maxlength="250" placeholder="댓글을 입력해 주세요."></textarea> 
       </div> 
       <div class="textarea-bottom"> <span class="count"><strong>0</strong> / 250</span> <button class="btn-reg" id="submitCommentButton" onclick="onClickSubmitComment()" disabled>등록</button> 
       </div> 
      </div> 
     </div> <!-- // comment-edit --> <!-- comment-sort-tab --> 
     <div class="comment-sort-tab"> <a id="sortLike" href="javascript:onClickSort('like', this)" class="anchor on">좋아요순</a> <a id="sortRecent" href="javascript:onClickSort('recent', this)" class="anchor">최신순</a> <a href="javascript:onClickRefresh()" class="refresh">새로고침</a> 
     </div> <!-- // comment-sort-tab --> <!-- .comment-list --> 
     <div class="comment-list"> 
      <ul id="comment-parent-container"> 
      </ul> 
     </div> <!-- // .comment-list --> <!-- comment-empty --> 
     <div class="comment-empty blind">
       첫번째 댓글을 남겨주세요. 
     </div> <!-- comment-empty --> <!-- .btn-all --> <button id="show-more-btn" class="btn-all" onclick="getComments(selectedSort, commentData.pageNum + 1, true)">더보기</button> <!-- // .btn-all --> 
    </div> <!-- // comment-area --> <!-- .ad-banner --> <!-- // .ad-banner --> 
    <section id="comment-report-popup" class="popup-alert"> 
     <div class="inner"> 
      <h1 class="title">댓글 신고</h1> <button class="btn-close" onclick="$(this).closest('.popup-alert').closePopup();"> <span class="blind">닫기</span> </button> 
      <p class="mt20">신고 사유를 선택해주세요.</p> 
      <div class="radio-group"> 
       <input class="radio" value="Discomfort" type="radio" name="report-radio" id="rdo_report_01" checked> <label for="rdo_report_01">불쾌감 조성(비방/욕설/인신공격)</label> 
       <input class="radio" value="IllegalAD" type="radio" name="report-radio" id="rdo_report_02"> <label for="rdo_report_02">불법 광고 또는 스팸</label> 
       <input class="radio" value="ObscenePost" type="radio" name="report-radio" id="rdo_report_03"> <label for="rdo_report_03">음란성 게시글</label> 
       <input class="radio" value="PersonalInfringement" type="radio" name="report-radio" id="rdo_report_04"> <label for="rdo_report_04">사생활 침해 또는 명예훼손</label> 
      </div> 
      <div class="btn-area"> <button type="button" class="is-gray" onclick="$(this).closest('.popup-alert').closePopup();">취소 </button> <button type="button" onclick="onClickSubmitCommentReport()">확인</button> 
      </div> 
     </div> 
    </section> <!-- 댓글 삭제 팝업 --> 
    <section id="comment-delete-popup" class="popup-alert"> 
     <div class="inner"> 
      <h1 class="title">삭제 확인</h1> 
      <p>작성하신 글을<br>삭제하시겠습니까?</p> 
      <div class="btn-area"> <button type="button" class="is-gray" onclick="$(this).closest('.popup-alert').closePopup();">취소 </button> <button type="button" onclick="$(this).closest('.popup-alert').closePopup(); deleteComment()">확인 </button> 
      </div> 
     </div> 
    </section> <!-- 댓글 삭제 팝업 --> 
    <section id="sign-in-request-popup" class="popup-alert"> 
     <div class="inner"> 
      <h1 class="title">로그인 요청</h1> 
      <p>로그인 한 후 이용 가능합니다. <br>로그인 하시겠습니까?</p> 
      <div class="btn-area"> <button type="button" class="is-gray" onclick="$(this).closest('.popup-alert').closePopup();">아니오 </button> <button type="button" onclick="Cookies.set('sign-in-url', location.href, { path: '/' }); location.href='/auth/sign-in'">네</button> 
      </div> 
     </div> 
    </section> 
    <div id="comment-dimmed" class="dimmed"> 
    </div> 
    <script>
    var selectedComment;
    var selectedSort = 'likeCnt,desc';
    var commentData = {
        total: 0,
        list: [],
        pageNum: 0,
        pageSize: 0,
        size: 0,
        startRow: 0,
        endRow: 0,
        pages: 0,
        prePage: 0,
        nextPage: 0,
        isFirstPage: false,
        isLastPage: false,
        hasPreviousPage: false,
        hasNextPage: false,
        navigatePages: 0,
        navigatepageNums: [],
        navigateFirstPage: 0,
        navigateLastPage: 0,
    };

    // 신고용
    var selectedOpinionIdForReport;
    // 삭제용
    var selectedOpinionIdForDelete;
    // 답글 등록시 새로 getComments하면 닫히는 것을 막기 위해서
    var selectedOpinionIdForFetch;

    var sch = location.search;
    var params = new URLSearchParams(sch);
    var commentId = params.get('commentId');
    var commentPage = params.get('commentPage');
    var replyId = params.get('replyId');

    $(function(){
        if (commentId != null && commentPage != null) {
            getComments('likeCnt,desc', '1');

            for (i = 2; i <= commentPage; i++) {
                getComments('likeCnt,desc', i, true)
            }
        } else {
            // 페이지가 켜지면 댓글들을 받아온다
            getComments('likeCnt,desc', '0');
        }
    });

    /**
     * 좋아요 버튼
     */
    function onClickLike(id) {
        addCommentSympathy(id, 'Like');
    }

    /**
     * 싫어하기 버튼
     */
    function onClickDislike(id) {
        addCommentSympathy(id, 'Dislike');
    }

    /**
     * 신고하기 팝업 띄우기
     */
    function onClickReport(id) {
        if (Cookies.get('accessToken') === undefined) {
            $('#sign-in-request-popup').addClass('on');
            $('#comment-dimmed').addClass('on');
            return;
        }
        // // console.log(id);
        selectedOpinionIdForReport = id;
        $('#comment-report-popup').addClass('on');
        $('#comment-dimmed').addClass('on');
    }

    /**
     * 신고하기
     */
    function onClickSubmitCommentReport() {
        var selectedReportType = $("input[name='report-radio']:checked").val();
        // // console.log(selectedReportType);
        if (selectedOpinionIdForReport !== undefined) {
            addReport(selectedOpinionIdForReport, selectedReportType);
        }
    }

    /**
     * 댓글 삭제 팝업 띄우는 함수
     */
    function onClickDeleteComment(id) {
        selectedOpinionIdForDelete = id;
        $('#comment-delete-popup').addClass('on');
        $('#comment-dimmed').addClass('on');
    }

    /**
     * 댓글 삭제 함수
     */
    function deleteComment() {
        //return false;
        if (selectedOpinionIdForDelete === undefined) {
            return;
        }
        var url = '/article/' + 'A2022032411350002138' + '/comment/' + selectedOpinionIdForDelete;
        // // console.log(url);
        $.ajax({
            url: url,
            method: 'DELETE',
            success: function (response) {
                // // console.log('기사 댓글 삭제 -> 성공');
                // // console.log(response);
                var flag = response;
                if (flag) {
                    alert("댓글이 삭제되었습니다.");
                    $('#comment-delete-popup').closePopup();
                    $('#comment-parent-container').empty();
                    getComments(selectedSort, commentData.pageNum);
                    selectedOpinionIdForDelete = undefined;
                } else {
                    alert("댓글 삭제 에러");
                    $('#comment-delete-popup').closePopup();
                    selectedOpinionIdForDelete = undefined;
                }
            },
            fail: function (err) {
                // console.log('기사 댓글 삭제 -> 에러');
            }
        });
    }

    /**
     * 공감 추가 함수
     */
    function addCommentSympathy(id, type) {
        //return false;
        var url = '/comment/' + id + '?opinionSympathyType=' + type + '&articleId=A2022032411350002138';
        // console.log('공감 추가 -> ' + url);
        $.ajax({
            url: url,
            method: 'POST',
            contentType: 'application/json',
            success: function (response) {
                // console.log('공감 추가 -> 성공');

                // 중복이 아니면 true가 내려온다?

                if (response.code === '0000') {
                    if (type === 'Like') {
                        var button = $('#commentLikeButton' + id).html().toString();
                        button = button.replace('<span class="thumb">좋아요</span>', '').replace('<span class="count">', '').replace('</span>', '');
                        var currentCount = parseInt(button);
                        $('#commentLikeButton' + id).addClass('on');
                        $('#commentLikeButton' + id).html('<span class="thumb">좋아요</span><span class="count">' + (currentCount + 1) + '</span>');
                    } else if (type === 'Dislike') {
                        var button = $('#commentDislikeButton' + id).html().toString();
                        button = button.replace('<span class="thumb">싫어요</span>', '').replace('<span class="count">', '').replace('</span>', '');
                        var currentCount = parseInt(button);
                        $('#commentDislikeButton' + id).html('<span class="thumb">싫어요</span><span class="count">' + (currentCount + 1) + '</span>');
                        $('#commentDislikeButton' + id).addClass('on');
                    }
                } else if (response.code === 'EXIST_SYMPATHY') {
                    deleteCommentSympathy(id, type);
                } else {
                    alert('댓글 공감 에러');
                }

                // console.log(response);
            },
            fail: function (err) {
                // console.log('공감 추가 -> 에러');
            }
        });
    }

    /**
     * 공감 제거 함수
     */
    function deleteCommentSympathy(id, type) {
        //return false;
        var url = '/comment/' + id + '?opinionSympathyType=' + type + '&articleId=A2022032411350002138';

        // console.log('공감 삭제 -> ' + url);
        $.ajax({
            url: url,
            method: 'DELETE',
            contentType: 'application/json',
            success: function (response) {
                // console.log('공감 삭제 -> 성공');
                // console.log(response);
                if (response.code === '0000') {
                    if (type === 'Like') {
                        var button = $('#commentLikeButton' + id).html().toString();
                        button = button.replace('<span class="thumb">좋아요</span>', '').replace('<span class="count">', '').replace('</span>', '');
                        var currentCount = parseInt(button);
                        $('#commentLikeButton' + id).removeClass('on');
                        $('#commentLikeButton' + id).html('<span class="thumb">좋아요</span><span class="count">' + (currentCount - 1) + '</span>')
                    } else if (type === 'Dislike') {
                        var button = $('#commentDislikeButton' + id).html().toString();
                        button = button.replace('<span class="thumb">싫어요</span>', '').replace('<span class="count">', '').replace('</span>', '');
                        var currentCount = parseInt(button);
                        button.replace('<span class="thumb">싫어요</span>', '')
                        $('#commentDislikeButton' + id).removeClass('on');
                        $('#commentDislikeButton' + id).html('<span class="thumb">싫어요</span><span class="count">' + (currentCount - 1) + '</span>')
                    }
                } else {
                    alert('댓글 공감 에러');
                }

            },
            fail: function (err) {
                // console.log('공감 삭제 -> 에러');
            }
        });
    }

    /**
     * 댓글 등록
     */
    function onClickSubmitComment() {
        //return false;
        $('#submitCommentButton').attr('disabled', true);

        var comment = $('#commentInput').val();
        if (comment.length < 251) {
            $.ajax({
                url: '/article/' + 'A2022032411350002138' + '/comment',
                method: "POST",
                contentType: 'application/json',
                data: JSON.stringify({
                    contents: comment,
                }),
                success: function (response) {
                    $('#submitCommentButton').attr('disabled', false);
                    if (checkCondition(response) > 0) return;
                    getComments(selectedSort, commentData.pageNum);

                    $('#commentInput').val('');
                    $('#commentInputContainer').removeClass('on');
                    $('#commentInputCount').html('<strong>0</strong> / 250')
                },
                fail: function (err) {
                    // console.log('댓글 등록 -> 댓글 등록 에러');
                }
            });
        }
    }

    /**
     * 답글 등록
     */
    function onClickSubmitCommentReply(id) {
        //return false;
        $('#commentSubmitButton' + id).attr('disabled', true);

        selectedOpinionIdForFetch = id;
        var commentReply = $('#commentReplyInput' + id).val();
        var url = '/article/' + 'A2022032411350002138' + '/comment';

        if (commentReply.length < 251) {
            $.ajax({
                url: url,
                method: "POST",
                contentType: 'application/json',
                data: JSON.stringify({
                    contents: commentReply,
                    opinionParentId: id
                }),
                success: function (response) {
                    $('#commentSubmitButton' + id).attr('disabled', false);
                    if (checkCondition(response) > 0) return;
                    getComments(selectedSort, commentData.pageNum);
                },
                fail: function (err) {
                }
            });
        }
    }

    /**
     * 댓글 포커싱
     */
    function onFocusInput() {
        if (Cookies.get('accessToken') === undefined) {
            $('#sign-in-request-popup').addClass('on');
            $('#comment-dimmed').addClass('on');
            setTimeout(function() {
                $('#commentInputContainer').removeClass('on');
            }, 100);
            return;
        }
    }

    /**
     * 신고하기 함수
     */
    function addReport(id, reportType) {
        //return false;
        var url = '/comment/' + id + '?opinionSympathyType=Report&rptType=' + reportType;
        // console.log('신고하기 등록 -> ' + url);
        $.ajax({
            url: url,
            method: 'POST',
            contentType: 'application/json',
            success: function (response) {
                selectedOpinionIdForReport = undefined;

                $('.popup-alert').closePopup();

                if (response.code === '0000') {
                    alert("신고가 접수되었습니다.");
                    // 이미 공감이 있으면 삭제 없으면 추가
                } else if (response.code === 'EXIST_SYMPATHY') {
                    alert('이미 신고한 댓글입니다.');
                } else {
                    alert('댓글 신고 에러');
                }

            },
            fail: function (err) {
                alert("신고하기 에러 발생");
                // console.log('신고하기 등록 -> 에러');
                selectedOpinionIdForReport = undefined;
            }
        });
    }

    /**
     * 답글 포커싱
     */
    function onFocusCommentInput(id) {
        if (Cookies.get('accessToken') === undefined) {
            $('#sign-in-request-popup').addClass('on');
            $('#comment-dimmed').addClass('on');
            return;
        }
        $('#commentReplyInput' + id).on('keyup', function (input) {
            if (input.target.value.length > 0) {
                $('#commentSubmitButton' + id).prop("disabled", false)
            } else {
                $('#commentSubmitButton' + id).prop("disabled", true)
            }
            $('#commentReplyInputCount' + id).html('<strong>' + input.target.value.length + '</strong> / 250');
        })
    }

    /**
     * 답글 input 클릭시
     */
    function onClickCommentReplyInput(id) {
        if (Cookies.get('accessToken') === undefined) {
            $('#sign-in-request-popup').addClass('on');
            $('#comment-dimmed').addClass('on');
            return;
        }
        setTimeout(function () {
            $('#commentReplyInput' + id).focus();
        }, 100);

        $('#commentReplyInputContainer' + id).addClass('on');
    }

    /**
     * 기사 댓글 조회
     * @param sort
     */
    function getComments(sort, pageNum, more = false) {
        //return false;
        //$('.comment-area').hide();
        //return;

        $.ajax({
            url: '/article/operation/more/A2022032411350002138',
            method: "GET",
            contentType: 'application/json',
            async: false,
            success: function (response) {
                if (response != undefined && response != null && response != '') {
                    if (response.memberOpinionYn == 'N') {
                        $('.comment-area').hide();
                        return;
                    }
                }
            }
        });

        var url = '/article/' + 'A2022032411350002138' + '/comment?Page=' + pageNum + '&sort=' + sort;
        $.ajax({
            url: url,
            method: "GET",
            contentType: 'application/json',
            success: function (response) {
                commentData = response;
                // console.log(commentData);
                if (commentData.isLastPage) {
                    $('#show-more-btn').addClass('blind');
                } else {
                    $('#show-more-btn').removeClass('blind');
                }

                /**
                 * 초기화
                 */
                $('#commentCntSpan').html('' + commentData.total + '');

                // 댓글 총 개수 설정
                $('.comment-title').html('댓글 <span class="count">' + commentData.total + '</span>');
                if (!more) {
                    $('.comment-list').html('<ul id="comment-parent-container"></ul>');
                }

                // 상단 댓글 총 개수 설정
                $('#top-comment-cnt').html(commentData.total);

                // if (commentData.total !== 0) {
                if (Boolean(commentData.total)) {
                    begin = (commentData.pageNum / 10) * 10 + 1;
                    if (commentData.pageNum % 10 === 0) {
                        begin -= 10;
                    }
                    end = begin + 9;
                    if (commentData.pages < begin + 9) {
                        end = begin;
                    }

                    // 댓글이 없을 때 보여지는 element 제거
                    $('.comment-empty').addClass('blind');
                    $('.comment-list').removeClass('blind');

                    for (var i = 0; i < commentData.list.length; i++) {
                        // 아이템
                        var item;
                        // 삭제 or 신고 버튼
                        var deleteReportButton;
                        // 전체보기 버튼
                        var showAllButtonFlag = 'blind';
                        // 답글 리스트 blind 클래스
                        var replyListBlindClass = 'blind';

                        item = commentData.list[i];
                        item.contents = item.contents.replace(/\n/g, '<br>');

                        // 전체보기 버튼 유무 설정
                        if (item.children.length >= 10) {
                            showAllButtonFlag = '';
                        }

                        if (item.opinionId === selectedOpinionIdForFetch) {
                            replyListBlindClass = '';
                        }

                        // 본인이 쓴 댓글이면 삭제 버튼, 타인이 쓴 댓글이면 신고 버튼
                        if (item.isOwner) {
                            deleteReportButton = '<a id="reportDeleteButton' + item.opinionId + '" href="javascript:onClickDeleteComment(\'' + item.opinionId + '\')" class="report">삭제</a>'
                        } else {
                            deleteReportButton = '<a id="reportDeleteButton' + item.opinionId + '" href="javascript:onClickReport(\'' + item.opinionId + '\')" class="report">신고</a>'
                        }

                        $('#comment-parent-container').append('<li class="comment-item" id="comment' + item.opinionId + '">\n' +
                            '                            <!-- .comment-box -->\n' +
                            '                            <div class="comment-box">\n' +
                            '                                <div class="info">\n' +
                            '                                    <span class="id">' + item.penName + '</span>\n' +
                            '                                    <span class="date">' + getFormattedDate(item.createdDt, 'yyyy.mm.dd hh:mm') + '</span>\n' +
                            '                                    <span class="bar"></span>\n' +
                            '                                    ' + deleteReportButton +
                            '                                </div>\n' +
                            '                                <div class="text">\n' +
                            '                                ' + item.contents + '\n' +
                            '                                </div>\n' +
                            '                                <div class="tool">\n' +
                            '                                    <button type="button" class="btn-reply" onclick="onClickToggleReply(\'' + item.opinionId + '\')">답글<span class="count">' + item.children.length + '</span></button>\n' +
                            '                                    <div class="btn-box">\n' +
                            '                                        <button class="btn-thumbup" id="commentLikeButton' + item.opinionId + '" onclick="onClickLike(\'' + item.opinionId + '\')"><span class="thumb">좋아요</span><span class="count">' + item.likeCnt + '</span></button>\n' +
                            '                                        <button class="btn-thumbdown" id="commentDislikeButton' + item.opinionId + '" onclick="onClickDislike(\'' + item.opinionId + '\')"><span class="thumb">싫어요</span><span class="count">' + item.dislikeCnt + '</span></button>\n' +
                            '                                    </div>\n' +
                            '                                </div>\n' +
                            '                            </div>\n' +
                            '                            <!-- //.comment-box -->\n' +
                            '                            <!-- .reply-list -->\n' +
                            '                            <div class="reply-list" id="commentReply' + item.opinionId + '">\n' +
                            '                                <!-- .reply-edit -->\n' +
                            '                                <div class="reply-edit" onclick="onClickCommentReplyInput(\'' + item.opinionId + '\')">\n' +
                            '                                    <button type="button" class="btn-open-edit" id="commentReplyInputContainer' + item.opinionId + '">답글을 입력 해주세요.\n' +
                            '                                        <span class="btn-reg">등록</span>\n' +
                            '                                    </button>\n' +
                            '                                    <div class="textarea-wrap">\n' +
                            '                                        <div class="textarea">\n' +
                            '                                            <textarea onfocus="onFocusCommentInput(\'' + item.opinionId + '\')" id="commentReplyInput' + item.opinionId + '" rows="3" maxlength="250" placeholder="댓글을 입력해 주세요."></textarea>\n' +
                            '                                        </div>\n' +
                            '                                        <div class="textarea-bottom">\n' +
                            '                                            <span class="count" id="commentReplyInputCount' + item.opinionId + '"><strong>0</strong> / 250</span>\n' +
                            '                                            <button onclick="onClickSubmitCommentReply(\'' + item.opinionId + '\')" class="btn-reg" id="commentSubmitButton' + item.opinionId + '" type="button" disabled>등록</button>\n' +
                            '                                        </div>\n' +
                            '                                    </div>\n' +
                            '                                </div>\n' +
                            '                                <!-- // .reply-edit -->\n' +
                            '                                <ul id="comment-children-container' + item.opinionId + '">\n' +
                            '                                </ul>\n' +
                            '                                <!-- .btn-all -->\n' +
                            '                               <button id="commentReplyShowAllButton' + item.opinionId + '" class="btn-all ' + showAllButtonFlag + '"\n' +
                            '                               onClick="onClickShowAllReply(\'' + item.opinionId + '\')">전체보기</button>\n' +
                            '                                <!-- // .btn-all -->\n' +
                            '                            </div>\n' +
                            '                            <!-- // .reply-list -->\n' +
                            '                        </li>');

                        // 답글
                        for (var j = 0; j < item.children.length; j++) {
                            var childrenItem = item.children[j];
                            var blindClass = "";
                            var childDeleteReportButton;

                            childrenItem.contents = childrenItem.contents.replace(/\n/g, '<br>');

                            // 본인이 쓴 댓글이면 삭제 버튼, 타인이 쓴 댓글이면 신고 버튼
                            if (childrenItem.isOwner) {
                                childDeleteReportButton = '<a id="reportDeleteButton' + childrenItem.opinionId + '" href="javascript:onClickDeleteComment(\'' + childrenItem.opinionId + '\')" class="report">삭제</a>'
                            } else {
                                childDeleteReportButton = '<a id="reportDeleteButton' + childrenItem.opinionId + '" href="javascript:onClickReport(\'' + childrenItem.opinionId + '\')" class="report">신고</a>'
                            }

                            if (j > 9) {
                                blindClass = "blind";
                            }
                            $('#comment-children-container' + item.opinionId).append('<li class="' + blindClass + '">\n' +
                                '  <div class="comment-box">\n' +
                                '    <div class="info">\n' +
                                '      <span class="id">' + childrenItem.penName + '</span>\n' +
                                '      <span class="date">' + getFormattedDate(childrenItem.createdDt, 'yyyy.mm.dd hh:mm') + '</span>\n' +
                                '      <span class="bar"></span>\n' +
                                '                                    ' + childDeleteReportButton +
                                '    </div>\n' +
                                '    <div class="text">\n' +
                                '      ' + childrenItem.contents + '\n' +
                                '    </div>\n' +
                                '    <div class="tool">\n' +
                                '      <div class="btn-box">\n' +
                                '        <button id="commentLikeButton' + childrenItem.opinionId + '" class="btn-thumbup" onclick="onClickLike(\'' + childrenItem.opinionId + '\')"><span\n' +
                                '            class="thumb">좋아요</span>' + childrenItem.likeCnt + '</button>\n' +
                                '        <button id="commentDislikeButton' + childrenItem.opinionId + '" class="btn-thumbdown" onclick="onClickDislike(\'' + childrenItem.opinionId + '\')"><span\n' +
                                '            class="thumb">싫어요</span>' + childrenItem.dislikeCnt + '</button>\n' +
                                '      </div>\n' +
                                '    </div>\n' +
                                '  </div>\n' +
                                '</li>');
                        }

                        selectedOpinionIdForFetch = undefined;
                    }

                    if (commentPage == pageNum) {
                        if (replyId != null) {
                            $('#commentReply' + commentId).addClass('on');
                        }

                        if (commentId != null) {
                            scrollTo(commentId);
                        }
                    }

                } else {
                    $('.comment-list').addClass('blind');
                    $('.comment-empty').removeClass('blind');
                }

                // console.log('기사 댓글 조회 -> 성공');
                // console.log(response);
            },
            fail: function (err) {
                // console.log('기사 댓글 조회 -> 에러');
            }
        });
    }

    /**
     * 새로고침
     */
    function onClickRefresh() {
        getComments(selectedSort, commentData.pageNum);
    }

    /**
     * 정렬하기 함수
     * @param type
     */
    function onClickSort(type) {
        // 좋아요 순 sort
        if (type === 'like') {
            if (selectedSort === 'likeCnt,desc') {
                return;
            }
            selectedSort = 'likeCnt,desc';
            $('#sortLike').toggleClass('on');
            $('#sortRecent').toggleClass('on');
            getComments(selectedSort, '');
            // 최신 순 sort
        } else {
            if (selectedSort === 'createdDt,desc') {
                return;
            }
            selectedSort = 'createdDt,desc';
            $('#sortLike').toggleClass('on');
            $('#sortRecent').toggleClass('on');
            getComments(selectedSort, '');
        }
    }

    /**
     * 유저이름 마스킹
     * @param userId
     * @returns {string}
     */
    function getMaskedUserId(userId) {
        var maskedUserId = userId.substring(0, userId.length / 2);
        maskedUserId += "****";
        return maskedUserId;
    }

    /**
     * 댓글 전체보기
     * @param id
     */
    function onClickShowAllReply(id) {
        // console.log(id);
        // console.log($('#commentReplyShowAllButton' + id).text());
        if ($('#commentReplyShowAllButton' + id).text() === '전체보기') {
            var children = $('#comment-children-container' + id).children();

            // 전체보기 클릭시 숨어있는 리스트 보여준다.
            for (var i = 0; i < children.length; i++) {
                $(children[i]).removeClass('blind');
            }
            $('#commentReplyShowAllButton' + id).html("전체접기");
            $('#commentReplyShowAllButton' + id).toggleClass("on");
            $('#commentReply' + id).removeClass('blind');

        } else {
            $('#commentReplyShowAllButton' + id).html("전체보기");
            $('#commentReplyShowAllButton' + id).toggleClass("on");
            $('#commentReply' + id).addClass('blind');
            scrollTo(id);
        }
    }

    /**
     * 답글 토글 - 지워야함
     * @param id
     */
    function onClickToggleReply(id) {
    }

    /**
     * 스크롤 함수
     * @param id
     */
    function scrollTo(id) {
        var offset = $('#comment' + id).offset();
        $('html, body').animate({scrollTop: offset.top - 200}, 400);
    }

    function checkCondition(response) {
        var returnVal = 0;

        if (response != undefined && response != null && response != '') {
            if (response.returnVal > 0) {
                if (response.returnVal == 1) {
                    alert('댓글/답글은 60초 내에 한 개만 등록하실 수 있습니다.');
                } else if (response.returnVal == 2) {
                    alert('이미 동일 내용의 댓글을 작성하였습니다.');
                } else if (response.returnVal == 3) {
                    alert('댓글에 부적절한 표현이 포함되어 있네요.  건전한 댓글 문화를 위해 등록이 제한됩니다.');
                } else if (response.returnVal >= 4) {
                    var abuserType = '댓글 쓰기 금지';
                    var abuserPeriod = response.UPDATED_DT.substr(0, 10) + ' ~ ' + response.PERIOD_DT.substr(0, 10);

                    if (response.returnVal == 5) abuserType = '기사당 한 개의 댓글만 가능';
                    else if (response.returnVal == 6) abuserType = '댓글 등록은 하루 한개만 가능';
                    if (response.ABUSER_PERIOD == '5') abuserPeriod = '영구금지';

                    alert(
                        '회원 게시물 관리(제 11조 3항)에 의거하여 댓글을 등록할 수 없습니다. \n' +
                        '제재 내용: ' + abuserType + '\n' +
                        '제재 기간: ' + abuserPeriod
                    );
                }
                returnVal = response.returnVal;
            }
        }

        return returnVal;
    }
</script> 
    <script src="https://kitweb.tadapi.info/network/adapi.h5.js.php?sub=hankook&amp;a=hankook_m_lb_fl_340x250&amp;refercheck=101"></script> <!-- Begin Dable 하C_세로4_EMPTY_카테베_02 / For inquiries, visit http://dable.io --> 
    <div data-el="dable3" class="end-ad-container"> 
     <div id="dablewidget_y74Dpd7V" class="dable-widget-light" data-widget_id="y74Dpd7V"> 
      <script>
            dable('renderWidget', 'dablewidget_y74Dpd7V');
        </script> 
     </div> 
     <div id="dablewidget_ko81EWq7" class="dable-widget-dark" data-widget_id="ko81EWq7"> 
      <script>
            dable('renderWidget', 'dablewidget_ko81EWq7');
        </script> 
     </div> 
    </div> 
    <div class="ad-banner"> 
     <script>
        var is_ins = false;
        
                is_ins = true;
                var adArray = ['endpage@dividelong01', 'ins'];
            

        // 중복 처리
        var $divideList = $('.ad-banner');
        if ($divideList.length) {
            for (var i = 0; i < $divideList.length; i++) {
                var id = $($divideList[i]).find('.img-box').attr('data-id');
                var adIndex = adArray.indexOf(id);
                if (adIndex > -1) {
                    adArray.splice(adIndex, 1);
                }
            }
        }

        
            for (var i = 0; i < 2; i++) {
                if(adArray[i] == 'ins' && is_ins){
                    // document.write('<div class="img-box" data-id="22268266355">');
                    // document.write('<ins class="adsbyaiinad" data-aiinad-inv="22268266355"></ins>');
                    // document.write('</div>');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/endpage@dividelong02"><\/script>');
                }else{
                    document.write('<div class="img-box" data-id="' + adArray[i] + '">');
                    document.write('<script language="javascript" src="//ad.hankookilbo.com/js/midas/hankookilbo/' + adArray[i] + '"><\/script>');
                    document.write('</div>');
                }

            }
        

        // 안드로이드 업데이트용
        if (location.href.indexOf('/News/Read') > -1 && navigator.userAgent.indexOf('Update') > -1) {
            $('.end-ad-container').addClass('blind');
        }
    </script> 
    </div> <!-- main --> <!-- main --> 
   </div> <!-- // container end --> 
  </div> <!-- // wrap --> <!-- 중복 선택 불가 안내 팝업 --> 
  <section id="article-sympathy-exist-popup" class="popup-alert already-check"> 
   <div class="inner"> 
    <h1 class="title">중복 선택 불가 안내</h1> 
    <p> 이미 공감 표현을 선택하신<br> 기사입니다. 변경을 원하시면 취소<br> 후 다시 선택해주세요. </p> 
    <div class="btn-area"> <button type="button" onclick="$(this).closest('.popup-alert').closePopup();">확인</button> 
    </div> 
   </div> 
  </section> <!-- // 중복 선택 불가 안내 팝업 --> <!-- 구독 취소 선택 팝업 --> 
  <section id="delete-subscription-popup" class="popup-alert"> 
   <div class="inner"> 
    <h1 class="title">구독 취소</h1> 
    <p>구독을 취소하시겠습니까?</p> 
    <div class="btn-area"> <button type="button" class="gray" onclick="$(this).closest('.popup-alert').closePopup();">아니오</button> <button type="button" onclick="$(this).closest('.popup-alert').closePopup(); subscribeTypeCheck();">네</button> 
    </div> 
   </div> 
  </section> <!-- // 구독 취소 선택 팝업 --> <!-- 공유하기 팝업 --> 
  <section id="pop-share" class="popup-alert"> 
   <div class="inner"> 
    <h1 class="title">공유하기</h1> <button class="btn-close" onclick="$(this).closest('.popup-alert').closePopup();"> <span class="blind">닫기</span> </button> 
    <div class="share-box"> <a class="kakaotalk" href="javascript:shareKakaotalk()"> <span class="text">카카오톡</span> </a> <a class="facebook" href="javascript:onClickShareFB()"> <span class="text">페이스북</span> </a> <a class="twitter" href="javascript:onClickShareTwitter()"> <span class="text">트위터</span> </a> <a class="mail" href="javascript:onClickShareWithEmail()"> <span class="text">메일</span> </a> <a class="sms" href="javascript:onClickShareWithSms()"> <span class="text">SMS</span> </a> <a class="url" href="javascript:copyCurrentUrlToClipboard()"> <span class="text">링크복사</span> </a> 
    </div> 
   </div> 
  </section> <!-- // 공유하기 팝업 --> <!-- 구독 추가 토스트 팝업 --> 
  <section id="subscribe-toast" class="popup-toast">
    구독이 추가 되었습니다. 
  </section> <!-- // 구독 추가 토스트 팝업 --> <!-- 구독 취소 토스트 팝업 --> 
  <section id="unsubscribe-toast" class="popup-toast">
    구독이 취소 되었습니다. 
  </section> <!-- // 구독 취소 토스트 팝업 --> <!-- 구독 취소 토스트 팝업 --> 
  <section id="save-article-toast" class="popup-toast">
    기사가 저장 되었습니다. 
  </section> <!-- // 구독 취소 토스트 팝업 --> <!-- 구독 취소 토스트 팝업 --> 
  <section id="delete-article-toast" class="popup-toast">
    기사 저장이 취소되었습니다. 
  </section> <!-- // 구독 취소 토스트 팝업 --> <!-- 링크 복사 토스트 팝업 --> 
  <section id="toast-save-link" class="popup-toast">
    링크가 복사되었습니다. 
  </section> <!-- // 링크 복사 토스트 팝업 --> <!-- 메일로 공유하기 팝업 --> 
  <section id="mail-share-popup" class="popup"> <!-- header --> 
   <div class="header"> 
    <div class="left"> <a class="logo" href="javascript:;"> <span class="blind">한국일보</span> </a> 
    </div> 
    <div class="right"> <button type="button" class="btn-close" onclick="$(this).closest('.popup').closePopup();"> <span class="blind">닫기</span> </button> 
    </div> 
   </div> <!-- // header --> <!-- container sub-section --> 
   <div class="container email-share"> 
    <h2>이메일로 기사 공유하기</h2> 
    <article> 
     <h3 class="share-tit">보내는 기사</h3> 
     <p class="news-tit">“대우, 정치적 판단 오류로”…<br> 외환위기 그리고 김우중의 한탄</p> 
    </article> 
    <article> 
     <h3>받으실 분</h3> 
     <input id="receiver-input" type="text" class="input-text" name="" placeholder="이메일"> 
     <p id="receiver-guide-msg" class="notice-gray">여러사람에게 보낼 경우 메일주소는 세미콜론(;)으로 구분해 주세요.<br> (최대 5개)</p> 
    </article> 
    <article> 
     <h3>보내는 분</h3> 
     <input id="sender-name-input" type="text" class="input-text" name="" placeholder="이름"> 
     <p id="sender-name-guide-msg" class="notice-red"></p> 
     <input id="sender-email-input" type="text" class="input-text" name="" placeholder="이메일"> 
     <p id="sender-email-guide-msg" class="notice-red"></p> <textarea id="sender-ps-input" class="textarea-text" placeholder="함께 보내는 메세지"></textarea> 
    </article> <a id="mail-send-btn" href="javascript:submit()" class="btn-full middle disabled">메일 전송</a> 
   </div> <!-- // container sub-section --> 
  </section> 
  <section id="mail-share-complete-popup" class="popup-alert"> 
   <div class="inner"> 
    <h1 class="title">전송완료</h1> 
    <p>기사가 메일로 전송되었습니다.</p> 
    <div class="btn-area"> <button type="button" onclick="$(this).closest('.popup-alert').closePopup(); $('#mail-share-popup').closePopup();">확인 </button> 
    </div> 
   </div> 
  </section> 
  <script>
    var articleTitle;
    var articleContent;
    var articleUrl;
    var articleSection;
    var receiverList;
    var senderName;
    var senderEmail;
    var senderPs;
    var emailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    var isValidSenderName = false;
    var isValidSenderEmail = false;
    var isValidReceiver = false;

    var receiverGuideMsg = $('#receiver-guide-msg');

    /**
     * 받으실 분 empty 체크
     */
    $('#receiver-input').on('keyup', function (input) {
        if (input.target.value.length === 0) {
            isValidReceiver = false;
        } else {
            isValidReceiver = true;
        }
        checkValidation();
    });

    /**
     * 보내는 분 이름 validation 체크
     */
    $('#sender-name-input').on('keyup', function (input) {
        senderName = input.target.value;
        if (senderName.length === 0) {
            isValidSenderName = false;
            $('#sender-name-guide-msg').html('보내는 분의 이름을 입력해주세요.');
        } else {
            isValidSenderName = true;
            $('#sender-name-guide-msg').html('');
        }
        checkValidation();
    });

    /**
     * 보내는 분 이메일 validation 체크
     */
    $('#sender-email-input').on('keyup', function (input) {
        senderEmail = input.target.value;
        if (!emailRegex.test(senderEmail)) {
            isValidSenderEmail = false;

            $('#sender-email-guide-msg').html('올바른 이메일 형식이 아닙니다.');
        } else {
            isValidSenderEmail = true;
            $('#sender-email-guide-msg').html('')
        }
        checkValidation();
    });

    /**
     * 메일 전송
     */
    function submit() {
        // 받는 사람 이메일 validation check
        receiverList = $('#receiver-input').val().split(';');
        var filteredReceiverList = [];

        // 빈 값이 아닌것만 골라낸다.
        for (var i = 0; i < receiverList.length; i++) {
            if (receiverList[i] !== '') {
                filteredReceiverList.push(receiverList[i]);
            }
        }

        for (var j = 0; j < filteredReceiverList.length; j++) {
            if (filteredReceiverList[j] !== '' && !emailRegex.test(filteredReceiverList[j])) {
                receiverGuideMsg.removeClass('notice-gray blind').addClass('notice-red');
                receiverGuideMsg.text("올바른 이메일 형식이 아닙니다.");
                return;
            }
        }

        if (filteredReceiverList.length > 5) {
            isValidReceiver = false;
            receiverGuideMsg.removeClass('notice-gray blind').addClass('notice-red');
            receiverGuideMsg.text("이메일은 최대 5명까지 보내실 수 있습니다.");
            return;
        }

        // 보내는 분 이메일 체크
        if (!isValidSenderEmail) {
            return;
        }

        // 보내는 분 이름 체크
        if (!isValidSenderEmail) {
            return;
        }

        // 받는 분 체크
        if (!isValidReceiver) {
            return;
        }

        $.ajax({
            url: '/article/share',
            method: 'POST',
            data: JSON.stringify({
                articleId: $('#articleId').val(),
                receiverList: filteredReceiverList,
                articleTitle: $('#articleTitle').val(),
                articleContent: $('#articleContents').val(),
                articleUrl: window.location.href,
                articleSection: $("#articleSection").val(),
                imagePath: $('#articleImageUrl').val(),
                senderName: senderName,
                senderEmail: senderEmail,
                senderPs: $('#sender-ps-input').val(),
                type: 'Email',
                activityType: 'Share'
            }),
            contentType: 'application/json',
            success: function (response) {
                // console.log('기사 이메일로 공유 성공');
                var flag = response;
                // 기사 공유 성공
                if (flag) {
                    $('#mail-share-complete-popup').openPopup();
                } else {
                    // console.log('기사 공유 실패');
                }
            },
            fail: function () {
                // console.log('기사 이메일로 공유 실패');
            },
            complete: function() {
                $('#receiver-input').val('');
                $('#sender-name-input').val('');
                $('#sender-email-input').val('');
                $('#sender-ps-input').val('');
                isValidReceiver = false;
                isValidSenderName = false;
                isValidSenderEmail = false;
            }
        })

    }

    function checkValidation() {
        if (isValidReceiver && isValidSenderEmail && isValidSenderName) {
            $('#mail-send-btn').removeClass('disabled')
        } else {
            $('#mail-send-btn').addClass('disabled')
        }
    }


</script> <!-- 메일로 공유하기 팝업 --> <!-- // end_popup --> 
  <script src="/js/ui.js"></script> 
  <script src="/js/split.js"></script> 
  <script src="/js/hmap/hkAnalTag_hub.min.js"></script> 
  <script>
    // 인풋 자동 완성 기능 때문에 fake input 생성
    function offAutocomplete() {
        var E = $('input[type="text"][autocomplete="off"]');
        for (var i = 0 ; i < E.length ; i++) {
            fakeInput = '<input type="text" style="position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;" tabindex="-1">';
            $(fakeInput).insertAfter(E[i]);
        }
    }

    try {
        var userAgent = window.navigator.userAgent;
        var isChrome = userAgent.indexOf('Chrome');
        var isChromeMobile = userAgent.indexOf('CriOS');
        if (isChrome || isChromeMobile) {
            offAutocomplete();
        }
    } catch (e) {

    }
</script> <!-- 뷰저블 스크립트 --> 
  <script type="text/javascript">
    (function(w, d, a){
        w.__beusablerumclient__ = {
            load : function(src){
                var b = d.createElement("script");
                b.src = src; b.async=true; b.type = "text/javascript";
                d.getElementsByTagName("head")[0].appendChild(b);
            }
        };w.__beusablerumclient__.load(a);
    })(window, document, "//rum.beusable.net/script/b201026e102031u720/213119441d");
</script> 
  <div id="hkpage_success"></div> 
  <script src="/js/split/slickExec.js"></script><!-- 카드 슬라이더 .card-slider --> 
  <script src="/js/lib/jquery.ui.touch-punch.js?ver=3.0.7"></script> 
  <script src="/js/split/endPage_improve.js?ver=3.0.7"></script> <!-- endPage --> 
  <input id="articleId" type="hidden" value="A2022032411350002138"> 
  <input id="shoulderType" type="hidden" value="Series"> 
  <input id="shoulderId" type="hidden" value="S2022030415260005356"> 
  <input id="HerbShoulderId" type="hidden" value="S2022030415260005356"> 
  <input id="articleContents" type="hidden" value="한국일보는 114주년 세계 여성의 날(3월 8일)을 맞아 '페미니즘을 거부하는 당신에게'(관련 기사: https://www.hankookilbo.com/Collect/7231)라는 기획 보도를 했습니다. 성평등에 가장 뒤쳐진 국가이면서도, 여성혐오로 얼룩진 사회에 대한 진단이었습니다. 특히 최근 페미니즘이 사회의 적폐로 통하는 사실에 주목, 페미니즘이 왜 "> 
  <input id="articleTitle" type="hidden" value="&quot;혐오 메일 보내주신&quot;, 페미니즘을 거부하는 당신에게 답합니다"> 
  <input id="articleSection" type="hidden" value="사회"> 
  <input id="articleImageUrl" type="hidden" value="https://newsimg.hankookilbo.com/cms/thumbnail/articlerelease/2022/03/24/A2022032411350002138.jpg"> 
  <script src="/js/split/slickExec.js"></script> 
  <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script> 
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&amp;version=v6.0&amp;appId=1241983985912870&amp;autoLogAppEvents=1"></script> 
  <script>Kakao.init('e62df5186f0758def8f14c53e64d7b9d');       // 사용할 앱의 JavaScript 키를 설정</script> 
  <script>
    // 좋아요 버튼 애니메이션 프레임
    var targetFrames = [];
    var subscribeLocation = '';


    /**
     * 부고 기사 조의 버튼 리스너
     */
    $('.btn-obituary').on('click', function (event) {
        onClickObituaryBtn(event);
    })

    /**
     * 기사 좋아요 버튼 리스너
     */
    $('.btn-like').on('click', function (event) {
        // if ($(this).hasClass('on')) {
        //     $('#article-sympathy-exist-popup').openPopup();
        //     return;
        // }
        onClickLikeArticleBtn(event);
    });

    /**
     * 싫어요 버튼 클릭 리스너
     */
    $('.btn-unlike').on('click', function (event) {
        // if ($(this).hasClass('on')) {
        //     $('#article-sympathy-exist-popup').openPopup();
        //     return;
        // }
        onClickDislikeArticleBtn(event);
    });

    init();

    /**
     * 기사 정보 초기화 - 좋아요, 싫어요, 기사 구독, 기사 저장 상태 체크
     */
    function init() {
        getArticleSaveStatus();
        getSympathyCnt();
        getArticleSubscriptionStatus();
        getLikeArticleStatus();
        getDislikeArticleStatus();
        addViewCnt();
    }

    /**
     * 기사 공감 개수 조회
     */
    function getSympathyCnt() {
        $.ajax({
            url: '/article/' + 'A2022032411350002138' + '/sympathy-count',
            method: 'GET',
            success: function (response) {
                // console.log('기사 공감 토탈 개수 조회 -> 성공');
                // console.log(response);
                var totalCnt = response.likeCnt + response.dislikeCnt;
                $('#top-sympathy-cnt').html(totalCnt);
                $('#top-like-cnt').html(response.likeCnt);
                $('#top-dislike-cnt').html(response.dislikeCnt);
                $('#bottom-like-cnt').html(response.likeCnt);
                $('#bottom-dislike-cnt').html(response.dislikeCnt);
                $('#bottom-obituary-cnt').html(response.likeCnt);
            },
            fail: function () {
                // console.log('기사 공감 토탈 개수 조회 -> 실패');
            }
        });
    }

    /**
     * 기사 조회 수 카운팅
     */
    function addViewCnt() {
        if (Cookies.get('accessToken') != null) {
            $.ajax({
                url: '/article/' + 'A2022032411350002138' + '/count',
                method: 'POST',
                success: function (response) {
                },
                fail: function () {
                }
            });
        }
    }

    /**
     * 기사 저장 상태 조회
     */
    function getArticleSaveStatus() {
        if (Cookies.get('accessToken') !== undefined) {
            $.ajax({
                url: '/article/activity/exist?articleId=' + 'A2022032411350002138' + '&activityType=Save',
                method: 'GET',
                success: function (response) {
                    var flag = response;
                    // console.log('기사 저장 상태 조회 -> 성공');
                    // console.log(response);
                    if (flag) {
                        $('.btn-save').addClass('on'); // 기사 하단
                        $('.icon-btn-bookmark').addClass('on'); // 기사 탑
                    }
                },
                fail: function (response) {
                    // console.log('기사 저장 상태 조회 -> 실패;');
                    // console.log(response);
                }
            });
        }
    }

    /**
     * 기사 저장 버튼 클릭
     */
    function onClickSaveArticleBtn() {
        // 로그인 확인
        if (Cookies.get('accessToken') === undefined) {
            $('#sign-in-request-popup').addClass('on');
            $('#comment-dimmed').addClass('on');
            return;
        }

        // 기사 저장 api를 쏜다 -> 중복체크는 controller에서 한다.
        $.ajax({
            url: '/article/activity',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
                articleId: 'A2022032411350002138',
                activityType: 'Save'
            }),
            success: function (response) {
                var flag = response;
                if (flag) {
                    $('.btn-save').toggleClass('on'); // 기사 하단
                    $('.icon-btn-bookmark').toggleClass('on'); // 기사 탑

                    if ($('.btn-save').hasClass('on')) {
                        $('#save-article-toast').addClass('on');
                        setTimeout(function () {
                            $('#save-article-toast').removeClass('on');
                        }, 2000)
                    } else {
                        $('#delete-article-toast').addClass('on');
                        setTimeout(function () {
                            $('#delete-article-toast').removeClass('on');
                        }, 2000)
                    }
                    // css를 바꾼다
                } else {
                    // console.log('기사 저장 -> 실패')
                }
            },
            fail: function () {
                // console.log('기사 저장 -> 에러')
            },
            complete: function () {
                $('.btn-more').removeClass('on');
            }
        })
    }

    /**
     * 문자로 공유하기
     */
    function onClickShareWithSms() {
        // console.log(window.location.href);
        if (navigator.userAgent.indexOf('Mobile-App') > -1) {
            var data = {
                type: 'SMS_SHARE',
                url: 'https://hankookilbo.com/News/Read/A2022032411350002138?did=sms',
                title: '"혐오 메일 보내주신", 페미니즘을 거부하는 당신에게 답합니다',
            };
            window.ReactNativeWebView.postMessage(JSON.stringify(data));
        } else {
            if (navigator.userAgent.match(/iPhone/i) != null) {
                location.href = "sms:&body=" + 'https://hankookilbo.com/News/Read/A2022032411350002138?did=sms';
                // TODO vm 이전으로 인해 공유하기 주석처리 차 후 아래 주석 풀고 사용해야 됨
                // location.href = "sms:&body=" + window.location.href;
            } else {
                location.href = "sms:?body=" + 'https://hankookilbo.com/News/Read/A2022032411350002138?did=sms';
                // TODO vm 이전으로 인해 공유하기 주석처리 차 후 아래 주석 풀고 사용해야 됨
                // location.href = "sms:?body=" + window.location.href;
            }
        }
        saveShareActivity()
    }

    /**
     * url 복사
     */
    function copyCurrentUrlToClipboard() {
        var dummy = document.createElement('input'),
            text = "https://m.hankookilbo.com" + location.pathname + location.search;
        // TODO vm 이전으로 인해 공유하기 주석처리 차 후 아래 주석 풀고 사용해야 됨
        // text = location.protocol +"//" + (location.host.indexOf('.')>-1? location.host.split('.').slice(1).join('.') : location.host) + location.pathname + location.search;

        setTimeout(
            () => {
                document.body.appendChild(dummy);
                dummy.value = text;
                dummy.select();
                document.execCommand('copy');
                document.body.removeChild(dummy);
                $('#toast-save-link').openPopup();
                $('#pop-share').closePopup();
            }
        );
        saveShareActivity();
    }

    /**
     * 카카오로 공유하기
     */
    function shareKakaotalk() {
        if (navigator.userAgent.indexOf('Mobile-App') > -1) {
            var data = {
                type: 'KAKAO_SHARE',
                url: 'https://hankookilbo.com/News/Read/A2022032411350002138?did=kk',
                title: $('#articleTitle').val(),
                imageUrl: 'https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/fd7a627d-c3b1-4483-a8d5-89c3619b42d8.jpg'
            };
            window.ReactNativeWebView.postMessage(JSON.stringify(data));
        } else {
            Kakao.Link.sendDefault({
                objectType: "feed"
                , content: {
                    title: $('#articleTitle').val(),
                    description: $('#articleContents').val(),
                    imageUrl: 'https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/fd7a627d-c3b1-4483-a8d5-89c3619b42d8.jpg',   // 썸네일 이미지
                    link: {
                        mobileWebUrl: 'https://hankookilbo.com/News/Read/A2022032411350002138?did=kk',   // 모바일 카카오톡에서 사용하는 웹 링크 URL
                        webUrl: 'https://hankookilbo.com/News/Read/A2022032411350002138?did=kk' // PC버전 카카오톡에서 사용하는 웹 링크 URL
                    }
                }
            });
        }
        saveShareActivity();
    }

    /**
     * 이메일로 공유하기
     */
    function onClickShareWithEmail() {
        $('#pop-share').closePopup();
        $('#mail-share-popup').openPopup();
        articleTitle = '메일 공유하기 테스트 제목';
        articleContent = '메일 공유하기 내용';
        articleUrl = "https://m.hankookilbo.com" + location.pathname + location.search;
        // TODO vm 이전으로 인해 공유하기 주석처리 차 후 아래 주석 풀고 사용해야 됨
        // articleUrl = location.protocol +"//" + (location.host.indexOf('.')>-1? location.host.split('.').slice(1).join('.') : location.host) + location.pathname + location.search;
        articleSection = '정치';
    }


    /**
     * 페이스북 공유 클릭
     */
    function onClickShareFB() {
        if (navigator.userAgent.indexOf('Mobile-App') > -1) {
            var data = {
                type: 'FACEBOOK_SHARE',
                url: 'https://hankookilbo.com/News/Read/A2022032411350002138?did=fa',
                title: $('#articleTitle').val(),
                imageUrl: 'https://newsimg.hankookilbo.com/cms/articlerelease/2022/03/24/fd7a627d-c3b1-4483-a8d5-89c3619b42d8.jpg'
            };
            window.ReactNativeWebView.postMessage(JSON.stringify(data));
        } else {
            var token;
            FB.login(function (response) {
                // console.log("페이스북 로그인");
                token = response.authResponse.accessToken;

                FB.api('/', 'POST', {
                    "id": 'https://m.hankookilbo.com' + '/News/Read/A2022032411350002138?did=fa',
                    "scrape": "true",
                    "access_token": token
                }, function (res) {
                    window.open('https://www.facebook.com/sharer/sharer.php?u=https://hankookilbo.com/News/Read/A2022032411350002138?did=fa', 'facebook-share-dialog', 'width=800,height=600');
                });
            });

        }
        saveShareActivity();

    }

    /**
     * 트위터 공유 클릭
     */
    function onClickShareTwitter() {
        if (navigator.userAgent.indexOf('Mobile-App') > -1) {
            var data = {
                type: 'TWITTER_SHARE',
                url: 'https://hankookilbo.com/News/Read/A2022032411350002138?did=tw',
                title: '"혐오 메일 보내주신", 페미니즘을 거부하는 당신에게 답합니다'
            };
            window.ReactNativeWebView.postMessage(JSON.stringify(data));
        } else {
            window.open('https://twitter.com/share?text="혐오 메일 보내주신", 페미니즘을 거부하는 당신에게 답합니다&url=https://hankookilbo.com/News/Read/A2022032411350002138?did=tw', 'twitter-popup', 'height=350,width=600');
        }

        saveShareActivity();
    }

    /**
     * 공유한 기록 저장
     */
    function saveShareActivity() {
        if (Cookies.get('accessToken') != null) {
            $.ajax({
                url: '/article/share',
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({
                    type: 'Sns',
                    articleId: 'A2022032411350002138',
                    activityType: 'Share'
                }),
                success: function (response) {
                    // console.log('share save success')
                },
                fail: function () {
                    // console.log('share save fail')
                }
            })
        }
    }

    /**
     * 기사 구독 버튼 클릭
     */
    function onClickSubscribeArticleBtn(location) {
        subscribeLocation = location;

        // 로그인 확인
        if (Cookies.get('accessToken') === undefined) {
            $('#sign-in-request-popup').addClass('on');
            $('#comment-dimmed').addClass('on');
            return;
        }

        if ($(event.target).hasClass('on')) {
            $('#delete-subscription-popup').openPopup();
            return;
        }
        subscribeTypeCheck();
    }

    /**
     * 구독 분기 함수
     */
    function subscribeTypeCheck(){
        if(subscribeLocation == 'JPAGE' || subscribeLocation == 'TAG'){
            subscribeArticleNew(subscribeLocation);
        }else{
            subscribeArticle();
        }
    }

    /**
     * 기사 구독
     */
    function subscribeArticle() {
        // 기사 구독 api를 쏜다 -> 중복체크는 controller에서 한다.
        let usersSubscriptionPart = 'Series';
        let usersSubscriptionValue = 'S2022030415260005356';
        let seriesType = '';
        switch (usersSubscriptionPart){
            case 'SeriesColumn':
                seriesType = 'NEWS_SERIES'
                break;
            case 'Planning':
                seriesType = 'NEWS_PLANNING'
                break;
            case 'Series':
                seriesType = 'NEWS_PLANNING'
                break;
            case 'NameColumn':
                seriesType = 'NEWS_SERIES'
                break;
        }
        $.ajax({
            url: '/my/subscription',
            method: "POST",
            contentType: 'application/json',
            data: JSON.stringify({
                usersSubscriptionPart: seriesType,
                usersSubscriptionValue: usersSubscriptionValue
            }),
            success: function (response) {
                var successYn = response;
                if (successYn) {
                    // css를 바꾼다
                    // console.log('기사 구독 -> 성공');
                    $('.btn-subsc').toggleClass('on');

                    // if ($('.subsc-btn.jpage').hasClass('on')) {
                    //     $('.subsc-btn.jpage').siblings('.add-pop').show();
                    // } else {
                    //     $('.subsc-btn.jpage').siblings('.cancel-pop').show();
                    // }
                } else {
                    // console.log('기사 구독 -> 실패')
                }
            }, fail: function (error) {
                //
            }
        });

    }


    /**
     * 기사 구독 상태 조회
     */
    function getArticleSubscriptionStatus() {
        if (Cookies.get('accessToken') !== undefined) {
            let usersSubscriptionPart = $("#shoulderType").val();
            let usersSubscriptionValue = $("#HerbShoulderId").val();
            let seriesType = '';
            switch (usersSubscriptionPart){
                case 'SeriesColumn':
                    seriesType = 'NEWS_SERIES'
                    break;
                case 'Planning':
                    seriesType = 'NEWS_PLANNING'
                    break;
                case 'Series':
                    seriesType = 'NEWS_PLANNING'
                    break;
                case 'NameColumn':
                    seriesType = 'NEWS_SERIES'
                    break;
            }
            var url = '/api/section/users-subscription-check?usersSubscriptionValue='+usersSubscriptionValue+'&usersSubscriptionPart='+seriesType;
            $.ajax({
                url: url,
                method: 'GET',
                contentType: 'application/json',
                success: function (response) {
                    // console.log('기사 구독 상태 조회 -> 성공');
                    // console.log(response);
                    var flag = response;
                    if (flag === 'Y') {
                        $('.top-bar .btn-subsc').addClass('on');
                        $('.end-bottom .btn-subsc').addClass('on');
                    } else {
                        $('.top-bar .btn-subsc').removeClass('on');
                        $('.end-bottom .btn-subsc').removeClass('on');
                    }
                },
                fail: function (err) {
                  // console.log('기사 구독 상태 조회 -> 실패');
                }
            });
        }
    }


    /**
     * 기사 좋아요 상태 조회
     */
    function getLikeArticleStatus() {
        // if (getCookie('accessToken') !== undefined) {
        $.ajax({
            url: '/article/activity/exist?articleId=' + 'A2022032411350002138' + '&activityType=Sympathy&activityValue=Y',
            method: 'GET',
            success: function (response) {
                var flag = response;
                // console.log('기사 좋아요 상태 조회 -> 성공');
                // console.log(response);
                if (flag) {
                    $('.btn-like').addClass('on');
                    $('.btn-obituary').addClass('on');
                } else {
                    // $('.btn-subsc').removeClass('on');
                }
            },
            fail: function (response) {
                // console.log('기사 저장 상태 조회 -> 실패');
                // console.log(response);
            }
        });
        // }
    }

    /**
     * 기사 싫어요 상태 조회
     */
    function getDislikeArticleStatus() {
        // if (getCookie('accessToken') !== undefined) {
        $.ajax({
            url: '/article/activity/exist?articleId=' + 'A2022032411350002138' + '&activityType=Sympathy&activityValue=N',
            method: 'GET',
            success: function (response) {
                var flag = response;
                // console.log('기사 싫어요 상태 조회 -> 성공');
                // console.log(response);
                if (flag) {
                    $('.btn-unlike').addClass('on')
                } else {
                }
            },
            fail: function (response) {
                // console.log('기사 저장 상태 조회 -> 실패');
                // console.log(response);
            }
        });
        // }
    }

    /**
     * 기사 부고 버튼 클릭
     */
    function onClickObituaryBtn(event) {
        event.stopImmediatePropagation();
        // 기사 좋아요 api를 쏜다 -> 중복체크는 controller에서 한다.
        $.ajax({
                url: '/article/activity',
                contentType: 'application/json',
                method: 'POST',
                data: JSON.stringify({
                    articleId: $('#articleId').val(),
                    activityType: 'Sympathy',
                    activityValue: 'Y'
                }),
                success: function (response) {
                    var flag = response;
                    // console.log(flag);
                    if (flag) {
                        // console.log('기사 부고 -> 성공');
                        var totalCount = parseInt($('#sympathyCntSpan').html());
                        endBtnObituary.$btn.toggleClass('on');
                        // css를 바꾼다
                        if (endBtnObituary.$btn.hasClass('on')) {
                            targetFrames = [endBtnObituary.startA, endBtnObituary.endA];
                            endBtnObituary.anim.playSegments([targetFrames], true);
                            var count = parseInt($('#bottom-obituary-cnt').html());
                            // console.log(count);
                            $('#bottom-obituary-cnt').html(count + 1);
                            $('#sympathyCntSpan').html(totalCount + 1);
                        } else {
                            targetFrames = [endBtnObituary.startB, endBtnObituary.endB];
                            endBtnObituary.anim.playSegments([targetFrames], true);
                            var count = parseInt($('#bottom-obituary-cnt').html());
                            $('#bottom-obituary-cnt').html(count - 1);
                            $('#sympathyCntSpan').html(totalCount - 1);
                        }

                    } else {
                        // console.log('기사 부고 -> 실패')
                    }
                },
                fail: function () {
                    // console.log('기사 좋아요 -> 에러')
                }
            }
        )
    }

    /**
     * 기사 좋아요 버튼 클릭
     */
    function onClickLikeArticleBtn(event) {
        event.stopImmediatePropagation();
        // 기사 좋아요 api를 쏜다 -> 중복체크는 controller에서 한다.
        $.ajax({
                url: '/article/activity',
                contentType: 'application/json',
                method: 'POST',
                data: JSON.stringify({
                    articleId: 'A2022032411350002138',
                    activityType: 'Sympathy',
                    activityValue: 'Y'
                }),
                success: function (response) {
                    var flag = response;
                    // console.log(flag);
                    if (flag) {
                        // console.log('기사 좋아요 -> 성공');
                        var totalCount = parseInt($('#top-sympathy-cnt').html());
                        $('.btn-like').toggleClass('on');
                        // css를 바꾼다
                        if ($('.btn-like').hasClass('on')) {
                            var count = parseInt($('#bottom-like-cnt').html());
                            $('#top-like-cnt').html(count + 1);
                            $('#bottom-like-cnt').html(count + 1);
                            $('#top-sympathy-cnt').html(totalCount + 1);
                        } else {
                            var count = parseInt($('#bottom-like-cnt').html());
                            $('#top-like-cnt').html(count - 1);
                            $('#bottom-like-cnt').html(count - 1);
                            $('#top-sympathy-cnt').html(totalCount - 1);
                        }
                    } else {
                        // console.log('기사 좋아요 -> 실패')
                    }
                },
                fail: function () {
                    // console.log('기사 좋아요 -> 에러')
                }
            }
        )
    }

    /**
     * 기사 싫어요 버튼 클릭
     */
    function onClickDislikeArticleBtn(event) {
        event.stopImmediatePropagation();
        // 기사 싫어요 api를 쏜다 -> 중복체크는 controller에서 한다.
        $.ajax({
            url: '/article/activity',
            contentType: 'application/json',
            method: 'POST',
            data: JSON.stringify({
                articleId: 'A2022032411350002138',
                activityType: 'Sympathy',
                activityValue: 'N'
            }),
            success: function (response) {
                var flag = response;
                // console.log(flag);
                var totalCount = parseInt($('#top-sympathy-cnt').html());
                $('.btn-unlike').toggleClass('on');
                if (flag) {
                    // console.log('기사 싫어요 -> 성공');
                    // css를 바꾼다
                    if ($('.btn-unlike').hasClass('on')) {
                        var count = parseInt($('#bottom-dislike-cnt').html());
                        $('#bottom-dislike-cnt').html(count + 1);
                        $('#dislikeCntLi').html(count + 1);
                        $('#top-sympathy-cnt').html(totalCount + 1);
                    } else {
                        var count = parseInt($('#bottom-dislike-cnt').html());
                        $('#bottom-dislike-cnt').html(count - 1);
                        $('#dislikeCntLi').html(count - 1);
                        $('#top-sympathy-cnt').html(totalCount - 1);
                    }
                } else {
                    // console.log('기사 싫어요 -> 실패')
                }
            },
            fail: function () {
                // console.log('기사 싫어요 -> 에러')
            }
        })
    }

    /**
     * 기자 구독
     */
    function subscribeArticleNew(location) {
        // 기사 구독 api를 쏜다 -> 중복체크는 controller에서 한다.
        if (location == 'JPAGE') {
            $.ajax({
                url: '/my/subscription',
                method: "POST",
                contentType: 'application/json',
                data: JSON.stringify({
                    usersSubscriptionPart: location,
                    usersSubscriptionValue: '023471c0-6382-4de0-b384-3bfcde5c77a9'
                }),
                success: function (response) {
                    var successYn = response;
                    if (successYn) {
                        // css를 바꾼다
                        // console.log('기사 구독 -> 성공');
                        $('.end-top .btn-subsc').toggleClass('on');

                        // if ($('.subsc-btn.jpage').hasClass('on')) {
                        //     $('.subsc-btn.jpage').siblings('.add-pop').show();
                        // } else {
                        //     $('.subsc-btn.jpage').siblings('.cancel-pop').show();
                        // }
                    } else {
                        // console.log('기사 구독 -> 실패')
                    }
                }, fail: function (error) {
                    //
                }
            });
        } else if (location == 'TAG') {
            $.ajax({
                url: '/my/subscription',
                method: "POST",
                contentType: 'application/json',
                data: JSON.stringify({
                    usersSubscriptionPart: location,
                    usersSubscriptionValue: ''
                }),
                success: function (response) {
                    var successYn = response;
                    if (successYn) {
                        // css를 바꾼다
                        // console.log('기사 구독 -> 성공');
                        $('.top-bar .btn-subsc').toggleClass('on');
                        $('.end-bottom .btn-subsc').toggleClass('on');

                        // if ($('.subsc-btn.tag').hasClass('on')) {
                        //     $('.subsc-btn.tag').siblings('.add-pop').show();
                        // } else {
                        //     $('.subsc-btn.tag').siblings('.cancel-pop').show();
                        // }
                    } else {
                        // console.log('기사 구독 -> 실패')
                    }
                },
                fail: function (error) {
                    //
                }
            });
        }
    }

    /**
     * 이전 기사 설정
     */
    if (Cookies.get('curr_article')) {
        Cookies.set('prev_article', Cookies.get('curr_article'), {path: '/'});
    }
    Cookies.set('curr_article', 'A2022032411350002138', {path: '/'});

    if (Cookies.get('prev_article') !== undefined && Cookies.get('prev_article') !== Cookies.get('curr_article')) {
        $('#top-right-back-btn').removeClass('blind');
        $('#top-right-back-btn').attr("href", "/News/Read/" + Cookies.get('prev_article'));
    } else {
        $('#top-right-back-btn').addClass('blind');
    }

    /**
     * 관심 있을 만한 뉴스
     */
    Cookies.set('read_article', $('#articleId').val(), {path: '/'});

    /**
     * 닫기 버튼 눌렀을 때
     */
    $('#top-right-close-btn').on('click', function () {
        removeLastReadArticle();
        Cookies.remove('prev_article');
        Cookies.remove('curr_article');
        // console.log(Cookies.get('closeUrl'));
        if (Cookies.get('closeUrl') === undefined) {
            location.replace('/');
        } else {
            location.replace(Cookies.get('closeUrl'))
        }
    });

    function getUsersSubscriptionCheckJpageId(type, id) {
        var url = '/api/section/users-subscription-check?usersSubscriptionValue=' + id + '&usersSubscriptionPart=' + type;
        $.ajax({
            url: url,
            method: 'GET',
            contentType: 'application/json',
            success: function (response) {
                //console.log('기사 구독 상태 조회 -> 성공');
                //console.log(response);
                var successYn = response;
                if (successYn == "Y") {
                    if (type == 'JPAGE') {
                        $('.end-top .btn-subsc').addClass('on')
                    } else if (type == 'TAG') {
                        $('.end-bottom .btn-subsc').addClass('on')
                    }
                } else if (successYn == "N") {
                    if (type == 'JPAGE') {
                        $('.end-top .btn-subsc').removeClass('on')
                    } else if (type == 'TAG') {
                        $('.end-bottom .btn-subsc').removeClass('on')
                    }
                }
            },
            fail: function (err) {
                console.log('기자 구독 조회-> 에러');
                $('div[data-el="sideHashNews"]').hide();
            }
        });
    }

    getUsersSubscriptionCheckJpageId("JPAGE", "023471c0-6382-4de0-b384-3bfcde5c77a9");
</script> <!-- // endPage -->  
 </body>
</html>